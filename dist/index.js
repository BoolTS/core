// @bun
var J0=Object.create;var{getPrototypeOf:Z0,defineProperty:r_,getOwnPropertyNames:B0}=Object;var V0=Object.prototype.hasOwnProperty;var N_=(_,T,A)=>{A=_!=null?J0(Z0(_)):{};let C=T||!_||!_.__esModule?r_(A,"default",{value:_,enumerable:!0}):A;for(let E of B0(_))if(!V0.call(C,E))r_(C,E,{get:()=>_[E],enumerable:!0});return C};var m=(_,T)=>()=>(T||_((T={exports:{}}).exports,T),T.exports);var D0=(_,T)=>{for(var A in T)r_(_,A,{get:T[A],enumerable:!0,configurable:!0,set:(C)=>T[A]=()=>C})};var G0=import.meta.require;var n_=m(()=>{/*! *****************************************************************************
Copyright (C) Microsoft. All rights reserved.
Licensed under the Apache License, Version 2.0 (the "License"); you may not use
this file except in compliance with the License. You may obtain a copy of the
License at http://www.apache.org/licenses/LICENSE-2.0

THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
MERCHANTABLITY OR NON-INFRINGEMENT.

See the Apache Version 2.0 License for specific language governing permissions
and limitations under the License.
***************************************************************************** */var bC;(function(_){(function(T){var A=typeof globalThis==="object"?globalThis:typeof global==="object"?global:typeof self==="object"?self:typeof this==="object"?this:w(),C=E(_);if(typeof A.Reflect<"u")C=E(A.Reflect,C);if(T(C,A),typeof A.Reflect>"u")A.Reflect=_;function E(L,Y){return function(F,J){if(Object.defineProperty(L,F,{configurable:!0,writable:!0,value:J}),Y)Y(F,J)}}function R(){try{return Function("return this;")()}catch(L){}}function c(){try{return(0,eval)("(function() { return this; })()")}catch(L){}}function w(){return R()||c()}})(function(T,A){var C=Object.prototype.hasOwnProperty,E=typeof Symbol==="function",R=E&&typeof Symbol.toPrimitive<"u"?Symbol.toPrimitive:"@@toPrimitive",c=E&&typeof Symbol.iterator<"u"?Symbol.iterator:"@@iterator",w=typeof Object.create==="function",L={__proto__:[]}instanceof Array,Y=!w&&!L,F={create:w?function(){return p_(Object.create(null))}:L?function(){return p_({__proto__:null})}:function(){return p_({})},has:Y?function(x,H){return C.call(x,H)}:function(x,H){return H in x},get:Y?function(x,H){return C.call(x,H)?x[H]:void 0}:function(x,H){return x[H]}},J=Object.getPrototypeOf(Function),S=typeof Map==="function"&&typeof Map.prototype.entries==="function"?Map:Y0(),Z=typeof Set==="function"&&typeof Set.prototype.entries==="function"?Set:Q0(),Q=typeof WeakMap==="function"?WeakMap:f0(),X=E?Symbol.for("@reflect-metadata:registry"):void 0,D=S0(),q=W0(D);function N(x,H,W,B){if(!O(W)){if(!$C(x))throw TypeError();if(!y(H))throw TypeError();if(!y(B)&&!O(B)&&!yT(B))throw TypeError();if(yT(B))B=void 0;return W=FT(W),s(x,H,W,B)}else{if(!$C(x))throw TypeError();if(!hC(H))throw TypeError();return o(x,H)}}T("decorate",N);function U(x,H){function W(B,$){if(!y(B))throw TypeError();if(!O($)&&!w0($))throw TypeError();z_(x,H,B,$)}return W}T("metadata",U);function V(x,H,W,B){if(!y(W))throw TypeError();if(!O(B))B=FT(B);return z_(x,H,W,B)}T("defineMetadata",V);function K(x,H,W){if(!y(H))throw TypeError();if(!O(W))W=FT(W);return e(x,H,W)}T("hasMetadata",K);function a(x,H,W){if(!y(H))throw TypeError();if(!O(W))W=FT(W);return TT(x,H,W)}T("hasOwnMetadata",a);function f(x,H,W){if(!y(H))throw TypeError();if(!O(W))W=FT(W);return AT(x,H,W)}T("getMetadata",f);function P(x,H,W){if(!y(H))throw TypeError();if(!O(W))W=FT(W);return IT(x,H,W)}T("getOwnMetadata",P);function h(x,H){if(!y(x))throw TypeError();if(!O(H))H=FT(H);return A_(x,H)}T("getMetadataKeys",h);function M(x,H){if(!y(x))throw TypeError();if(!O(H))H=FT(H);return lT(x,H)}T("getOwnMetadataKeys",M);function i(x,H,W){if(!y(H))throw TypeError();if(!O(W))W=FT(W);if(!y(H))throw TypeError();if(!O(W))W=FT(W);var B=E_(H,W,!1);if(O(B))return!1;return B.OrdinaryDeleteMetadata(x,H,W)}T("deleteMetadata",i);function o(x,H){for(var W=x.length-1;W>=0;--W){var B=x[W],$=B(H);if(!O($)&&!yT($)){if(!hC($))throw TypeError();H=$}}return H}function s(x,H,W,B){for(var $=x.length-1;$>=0;--$){var j=x[$],p=j(H,W,B);if(!O(p)&&!yT(p)){if(!y(p))throw TypeError();B=p}}return B}function e(x,H,W){var B=TT(x,H,W);if(B)return!0;var $=o_(H);if(!yT($))return e(x,$,W);return!1}function TT(x,H,W){var B=E_(H,W,!1);if(O(B))return!1;return IC(B.OrdinaryHasOwnMetadata(x,H,W))}function AT(x,H,W){var B=TT(x,H,W);if(B)return IT(x,H,W);var $=o_(H);if(!yT($))return AT(x,$,W);return}function IT(x,H,W){var B=E_(H,W,!1);if(O(B))return;return B.OrdinaryGetOwnMetadata(x,H,W)}function z_(x,H,W,B){var $=E_(W,B,!0);$.OrdinaryDefineOwnMetadata(x,H,W,B)}function A_(x,H){var W=lT(x,H),B=o_(x);if(B===null)return W;var $=A_(B,H);if($.length<=0)return W;if(W.length<=0)return $;var j=new Z,p=[];for(var u=0,G=W;u<G.length;u++){var z=G[u],n=j.has(z);if(!n)j.add(z),p.push(z)}for(var I=0,b=$;I<b.length;I++){var z=b[I],n=j.has(z);if(!n)j.add(z),p.push(z)}return p}function lT(x,H){var W=E_(x,H,!1);if(!W)return[];return W.OrdinaryOwnMetadataKeys(x,H)}function KC(x){if(x===null)return 1;switch(typeof x){case"undefined":return 0;case"boolean":return 2;case"string":return 3;case"symbol":return 4;case"number":return 5;case"object":return x===null?1:6;default:return 6}}function O(x){return x===void 0}function yT(x){return x===null}function c0(x){return typeof x==="symbol"}function y(x){return typeof x==="object"?x!==null:typeof x==="function"}function x0(x,H){switch(KC(x)){case 0:return x;case 1:return x;case 2:return x;case 3:return x;case 4:return x;case 5:return x}var W=H===3?"string":H===5?"number":"default",B=mC(x,R);if(B!==void 0){var $=B.call(x,W);if(y($))throw TypeError();return $}return L0(x,W==="default"?"number":W)}function L0(x,H){if(H==="string"){var W=x.toString;if(jT(W)){var B=W.call(x);if(!y(B))return B}var $=x.valueOf;if(jT($)){var B=$.call(x);if(!y(B))return B}}else{var $=x.valueOf;if(jT($)){var B=$.call(x);if(!y(B))return B}var j=x.toString;if(jT(j)){var B=j.call(x);if(!y(B))return B}}throw TypeError()}function IC(x){return!!x}function H0(x){return""+x}function FT(x){var H=x0(x,3);if(c0(H))return H;return H0(H)}function $C(x){return Array.isArray?Array.isArray(x):x instanceof Object?x instanceof Array:Object.prototype.toString.call(x)==="[object Array]"}function jT(x){return typeof x==="function"}function hC(x){return typeof x==="function"}function w0(x){switch(KC(x)){case 3:return!0;case 4:return!0;default:return!1}}function i_(x,H){return x===H||x!==x&&H!==H}function mC(x,H){var W=x[H];if(W===void 0||W===null)return;if(!jT(W))throw TypeError();return W}function OC(x){var H=mC(x,c);if(!jT(H))throw TypeError();var W=H.call(x);if(!y(W))throw TypeError();return W}function MC(x){return x.value}function uC(x){var H=x.next();return H.done?!1:H}function gC(x){var H=x.return;if(H)H.call(x)}function o_(x){var H=Object.getPrototypeOf(x);if(typeof x!=="function"||x===J)return H;if(H!==J)return H;var W=x.prototype,B=W&&Object.getPrototypeOf(W);if(B==null||B===Object.prototype)return H;var $=B.constructor;if(typeof $!=="function")return H;if($===x)return H;return $}function F0(){var x;if(!O(X)&&typeof A.Reflect<"u"&&!(X in A.Reflect)&&typeof A.Reflect.defineMetadata==="function")x=q0(A.Reflect);var H,W,B,$=new Q,j={registerProvider:p,getProvider:G,setProvider:n};return j;function p(I){if(!Object.isExtensible(j))throw Error("Cannot add provider to a frozen registry.");switch(!0){case x===I:break;case O(H):H=I;break;case H===I:break;case O(W):W=I;break;case W===I:break;default:if(B===void 0)B=new Z;B.add(I);break}}function u(I,b){if(!O(H)){if(H.isProviderFor(I,b))return H;if(!O(W)){if(W.isProviderFor(I,b))return H;if(!O(B)){var v=OC(B);while(!0){var d=uC(v);if(!d)return;var wT=MC(d);if(wT.isProviderFor(I,b))return gC(v),wT}}}}if(!O(x)&&x.isProviderFor(I,b))return x;return}function G(I,b){var v=$.get(I),d;if(!O(v))d=v.get(b);if(!O(d))return d;if(d=u(I,b),!O(d)){if(O(v))v=new S,$.set(I,v);v.set(b,d)}return d}function z(I){if(O(I))throw TypeError();return H===I||W===I||!O(B)&&B.has(I)}function n(I,b,v){if(!z(v))throw Error("Metadata provider not registered.");var d=G(I,b);if(d!==v){if(!O(d))return!1;var wT=$.get(I);if(O(wT))wT=new S,$.set(I,wT);wT.set(b,v)}return!0}}function S0(){var x;if(!O(X)&&y(A.Reflect)&&Object.isExtensible(A.Reflect))x=A.Reflect[X];if(O(x))x=F0();if(!O(X)&&y(A.Reflect)&&Object.isExtensible(A.Reflect))Object.defineProperty(A.Reflect,X,{enumerable:!1,configurable:!1,writable:!1,value:x});return x}function W0(x){var H=new Q,W={isProviderFor:function(z,n){var I=H.get(z);if(O(I))return!1;return I.has(n)},OrdinaryDefineOwnMetadata:p,OrdinaryHasOwnMetadata:$,OrdinaryGetOwnMetadata:j,OrdinaryOwnMetadataKeys:u,OrdinaryDeleteMetadata:G};return D.registerProvider(W),W;function B(z,n,I){var b=H.get(z),v=!1;if(O(b)){if(!I)return;b=new S,H.set(z,b),v=!0}var d=b.get(n);if(O(d)){if(!I)return;if(d=new S,b.set(n,d),!x.setProvider(z,n,W)){if(b.delete(n),v)H.delete(z);throw Error("Wrong provider for target.")}}return d}function $(z,n,I){var b=B(n,I,!1);if(O(b))return!1;return IC(b.has(z))}function j(z,n,I){var b=B(n,I,!1);if(O(b))return;return b.get(z)}function p(z,n,I,b){var v=B(I,b,!0);v.set(z,n)}function u(z,n){var I=[],b=B(z,n,!1);if(O(b))return I;var v=b.keys(),d=OC(v),wT=0;while(!0){var PC=uC(d);if(!PC)return I.length=wT,I;var U0=MC(PC);try{I[wT]=U0}catch(X0){try{gC(d)}finally{throw X0}}wT++}}function G(z,n,I){var b=B(n,I,!1);if(O(b))return!1;if(!b.delete(z))return!1;if(b.size===0){var v=H.get(n);if(!O(v)){if(v.delete(I),v.size===0)H.delete(v)}}return!0}}function q0(x){var{defineMetadata:H,hasOwnMetadata:W,getOwnMetadata:B,getOwnMetadataKeys:$,deleteMetadata:j}=x,p=new Q,u={isProviderFor:function(G,z){var n=p.get(G);if(!O(n)&&n.has(z))return!0;if($(G,z).length){if(O(n))n=new Z,p.set(G,n);return n.add(z),!0}return!1},OrdinaryDefineOwnMetadata:H,OrdinaryHasOwnMetadata:W,OrdinaryGetOwnMetadata:B,OrdinaryOwnMetadataKeys:$,OrdinaryDeleteMetadata:j};return u}function E_(x,H,W){var B=D.getProvider(x,H);if(!O(B))return B;if(W){if(D.setProvider(x,H,q))return q;throw Error("Illegal state.")}return}function Y0(){var x={},H=[],W=function(){function u(G,z,n){this._index=0,this._keys=G,this._values=z,this._selector=n}return u.prototype["@@iterator"]=function(){return this},u.prototype[c]=function(){return this},u.prototype.next=function(){var G=this._index;if(G>=0&&G<this._keys.length){var z=this._selector(this._keys[G],this._values[G]);if(G+1>=this._keys.length)this._index=-1,this._keys=H,this._values=H;else this._index++;return{value:z,done:!1}}return{value:void 0,done:!0}},u.prototype.throw=function(G){if(this._index>=0)this._index=-1,this._keys=H,this._values=H;throw G},u.prototype.return=function(G){if(this._index>=0)this._index=-1,this._keys=H,this._values=H;return{value:G,done:!0}},u}(),B=function(){function u(){this._keys=[],this._values=[],this._cacheKey=x,this._cacheIndex=-2}return Object.defineProperty(u.prototype,"size",{get:function(){return this._keys.length},enumerable:!0,configurable:!0}),u.prototype.has=function(G){return this._find(G,!1)>=0},u.prototype.get=function(G){var z=this._find(G,!1);return z>=0?this._values[z]:void 0},u.prototype.set=function(G,z){var n=this._find(G,!0);return this._values[n]=z,this},u.prototype.delete=function(G){var z=this._find(G,!1);if(z>=0){var n=this._keys.length;for(var I=z+1;I<n;I++)this._keys[I-1]=this._keys[I],this._values[I-1]=this._values[I];if(this._keys.length--,this._values.length--,i_(G,this._cacheKey))this._cacheKey=x,this._cacheIndex=-2;return!0}return!1},u.prototype.clear=function(){this._keys.length=0,this._values.length=0,this._cacheKey=x,this._cacheIndex=-2},u.prototype.keys=function(){return new W(this._keys,this._values,$)},u.prototype.values=function(){return new W(this._keys,this._values,j)},u.prototype.entries=function(){return new W(this._keys,this._values,p)},u.prototype["@@iterator"]=function(){return this.entries()},u.prototype[c]=function(){return this.entries()},u.prototype._find=function(G,z){if(!i_(this._cacheKey,G)){this._cacheIndex=-1;for(var n=0;n<this._keys.length;n++)if(i_(this._keys[n],G)){this._cacheIndex=n;break}}if(this._cacheIndex<0&&z)this._cacheIndex=this._keys.length,this._keys.push(G),this._values.push(void 0);return this._cacheIndex},u}();return B;function $(u,G){return u}function j(u,G){return G}function p(u,G){return[u,G]}}function Q0(){var x=function(){function H(){this._map=new S}return Object.defineProperty(H.prototype,"size",{get:function(){return this._map.size},enumerable:!0,configurable:!0}),H.prototype.has=function(W){return this._map.has(W)},H.prototype.add=function(W){return this._map.set(W,W),this},H.prototype.delete=function(W){return this._map.delete(W)},H.prototype.clear=function(){this._map.clear()},H.prototype.keys=function(){return this._map.keys()},H.prototype.values=function(){return this._map.keys()},H.prototype.entries=function(){return this._map.entries()},H.prototype["@@iterator"]=function(){return this.keys()},H.prototype[c]=function(){return this.keys()},H}();return x}function f0(){var x=16,H=F.create(),W=B();return function(){function G(){this._key=B()}return G.prototype.has=function(z){var n=$(z,!1);return n!==void 0?F.has(n,this._key):!1},G.prototype.get=function(z){var n=$(z,!1);return n!==void 0?F.get(n,this._key):void 0},G.prototype.set=function(z,n){var I=$(z,!0);return I[this._key]=n,this},G.prototype.delete=function(z){var n=$(z,!1);return n!==void 0?delete n[this._key]:!1},G.prototype.clear=function(){this._key=B()},G}();function B(){var G;do G="@@WeakMap@@"+u();while(F.has(H,G));return H[G]=!0,G}function $(G,z){if(!C.call(G,W)){if(!z)return;Object.defineProperty(G,W,{value:F.create()})}return G[W]}function j(G,z){for(var n=0;n<z;++n)G[n]=Math.random()*255|0;return G}function p(G){if(typeof Uint8Array==="function"){var z=new Uint8Array(G);if(typeof crypto<"u")crypto.getRandomValues(z);else if(typeof msCrypto<"u")msCrypto.getRandomValues(z);else j(z,G);return z}return j(Array(G),G)}function u(){var G=p(x);G[6]=G[6]&79|64,G[8]=G[8]&191|128;var z="";for(var n=0;n<x;++n){var I=G[n];if(n===4||n===6||n===8)z+="-";if(I<16)z+="0";z+=I.toString(16).toLowerCase()}return z}}function p_(x){return x.__=void 0,delete x.__,x}})})(bC||(bC={}))});var gT=m(($4,yC)=>{yC.exports=TypeError});var dC=m((h4,jC)=>{jC.exports=G0("util").inspect});var Y_=m((m4,FA)=>{var xC=typeof Map==="function"&&Map.prototype,e_=Object.getOwnPropertyDescriptor&&xC?Object.getOwnPropertyDescriptor(Map.prototype,"size"):null,h_=xC&&e_&&typeof e_.get==="function"?e_.get:null,sC=xC&&Map.prototype.forEach,LC=typeof Set==="function"&&Set.prototype,a_=Object.getOwnPropertyDescriptor&&LC?Object.getOwnPropertyDescriptor(Set.prototype,"size"):null,m_=LC&&a_&&typeof a_.get==="function"?a_.get:null,iC=LC&&Set.prototype.forEach,LR=typeof WeakMap==="function"&&WeakMap.prototype,S_=LR?WeakMap.prototype.has:null,HR=typeof WeakSet==="function"&&WeakSet.prototype,W_=HR?WeakSet.prototype.has:null,wR=typeof WeakRef==="function"&&WeakRef.prototype,oC=wR?WeakRef.prototype.deref:null,FR=Boolean.prototype.valueOf,SR=Object.prototype.toString,WR=Function.prototype.toString,qR=String.prototype.match,HC=String.prototype.slice,$T=String.prototype.replace,YR=String.prototype.toUpperCase,pC=String.prototype.toLowerCase,EA=RegExp.prototype.test,rC=Array.prototype.concat,BT=Array.prototype.join,QR=Array.prototype.slice,tC=Math.floor,CC=typeof BigInt==="function"?BigInt.prototype.valueOf:null,TC=Object.getOwnPropertySymbols,AC=typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"?Symbol.prototype.toString:null,pT=typeof Symbol==="function"&&typeof Symbol.iterator==="object",q_=typeof Symbol==="function"&&Symbol.toStringTag&&(typeof Symbol.toStringTag===pT?"object":"symbol")?Symbol.toStringTag:null,RA=Object.prototype.propertyIsEnumerable,eC=(typeof Reflect==="function"?Reflect.getPrototypeOf:Object.getPrototypeOf)||([].__proto__===Array.prototype?function(_){return _.__proto__}:null);function aC(_,T){if(_===1/0||_===-1/0||_!==_||_&&_>-1000&&_<1000||EA.call(/e/,T))return T;var A=/[0-9](?=(?:[0-9]{3})+(?![0-9]))/g;if(typeof _==="number"){var C=_<0?-tC(-_):tC(_);if(C!==_){var E=String(C),R=HC.call(T,E.length+1);return $T.call(E,A,"$&_")+"."+$T.call($T.call(R,/([0-9]{3})/g,"$&_"),/_$/,"")}}return $T.call(T,A,"$&_")}var EC=dC(),TA=EC.custom,_A=LA(TA)?TA:null,cA={__proto__:null,double:'"',single:"'"},fR={__proto__:null,double:/(["\\])/g,single:/(['\\])/g};FA.exports=function _(T,A,C,E){var R=A||{};if(nT(R,"quoteStyle")&&!nT(cA,R.quoteStyle))throw TypeError('option "quoteStyle" must be "single" or "double"');if(nT(R,"maxStringLength")&&(typeof R.maxStringLength==="number"?R.maxStringLength<0&&R.maxStringLength!==1/0:R.maxStringLength!==null))throw TypeError('option "maxStringLength", if provided, must be a positive integer, Infinity, or `null`');var c=nT(R,"customInspect")?R.customInspect:!0;if(typeof c!=="boolean"&&c!=="symbol")throw TypeError("option \"customInspect\", if provided, must be `true`, `false`, or `'symbol'`");if(nT(R,"indent")&&R.indent!==null&&R.indent!=="\t"&&!(parseInt(R.indent,10)===R.indent&&R.indent>0))throw TypeError('option "indent" must be "\\t", an integer > 0, or `null`');if(nT(R,"numericSeparator")&&typeof R.numericSeparator!=="boolean")throw TypeError('option "numericSeparator", if provided, must be `true` or `false`');var w=R.numericSeparator;if(typeof T>"u")return"undefined";if(T===null)return"null";if(typeof T==="boolean")return T?"true":"false";if(typeof T==="string")return wA(T,R);if(typeof T==="number"){if(T===0)return 1/0/T>0?"0":"-0";var L=String(T);return w?aC(T,L):L}if(typeof T==="bigint"){var Y=String(T)+"n";return w?aC(T,Y):Y}var F=typeof R.depth>"u"?5:R.depth;if(typeof C>"u")C=0;if(C>=F&&F>0&&typeof T==="object")return RC(T)?"[Array]":"[Object]";var J=MR(R,C);if(typeof E>"u")E=[];else if(HA(E,T)>=0)return"[Circular]";function S(s,e,TT){if(e)E=QR.call(E),E.push(e);if(TT){var AT={depth:R.depth};if(nT(R,"quoteStyle"))AT.quoteStyle=R.quoteStyle;return _(s,AT,C+1,E)}return _(s,R,C+1,E)}if(typeof T==="function"&&!CA(T)){var Z=zR(T),Q=$_(T,S);return"[Function"+(Z?": "+Z:" (anonymous)")+"]"+(Q.length>0?" { "+BT.call(Q,", ")+" }":"")}if(LA(T)){var X=pT?$T.call(String(T),/^(Symbol\(.*\))_[^)]*$/,"$1"):AC.call(T);return typeof T==="object"&&!pT?F_(X):X}if(hR(T)){var D="<"+pC.call(String(T.nodeName)),q=T.attributes||[];for(var N=0;N<q.length;N++)D+=" "+q[N].name+"="+xA(UR(q[N].value),"double",R);if(D+=">",T.childNodes&&T.childNodes.length)D+="...";return D+="</"+pC.call(String(T.nodeName))+">",D}if(RC(T)){if(T.length===0)return"[]";var U=$_(T,S);if(J&&!OR(U))return"["+cC(U,J)+"]";return"[ "+BT.call(U,", ")+" ]"}if(JR(T)){var V=$_(T,S);if(!("cause"in Error.prototype)&&"cause"in T&&!RA.call(T,"cause"))return"{ ["+String(T)+"] "+BT.call(rC.call("[cause]: "+S(T.cause),V),", ")+" }";if(V.length===0)return"["+String(T)+"]";return"{ ["+String(T)+"] "+BT.call(V,", ")+" }"}if(typeof T==="object"&&c){if(_A&&typeof T[_A]==="function"&&EC)return EC(T,{depth:F-C});else if(c!=="symbol"&&typeof T.inspect==="function")return T.inspect()}if(NR(T)){var K=[];if(sC)sC.call(T,function(s,e){K.push(S(e,T,!0)+" => "+S(s,T))});return AA("Map",h_.call(T),K,J)}if(IR(T)){var a=[];if(iC)iC.call(T,function(s){a.push(S(s,T))});return AA("Set",m_.call(T),a,J)}if(nR(T))return _C("WeakMap");if($R(T))return _C("WeakSet");if(KR(T))return _C("WeakRef");if(BR(T))return F_(S(Number(T)));if(DR(T))return F_(S(CC.call(T)));if(VR(T))return F_(FR.call(T));if(ZR(T))return F_(S(String(T)));if(typeof window<"u"&&T===window)return"{ [object Window] }";if(typeof globalThis<"u"&&T===globalThis||typeof global<"u"&&T===global)return"{ [object globalThis] }";if(!XR(T)&&!CA(T)){var f=$_(T,S),P=eC?eC(T)===Object.prototype:T instanceof Object||T.constructor===Object,h=T instanceof Object?"":"null prototype",M=!P&&q_&&Object(T)===T&&q_ in T?HC.call(hT(T),8,-1):h?"Object":"",i=P||typeof T.constructor!=="function"?"":T.constructor.name?T.constructor.name+" ":"",o=i+(M||h?"["+BT.call(rC.call([],M||[],h||[]),": ")+"] ":"");if(f.length===0)return o+"{}";if(J)return o+"{"+cC(f,J)+"}";return o+"{ "+BT.call(f,", ")+" }"}return String(T)};function xA(_,T,A){var C=A.quoteStyle||T,E=cA[C];return E+_+E}function UR(_){return $T.call(String(_),/"/g,"&quot;")}function PT(_){return!q_||!(typeof _==="object"&&((q_ in _)||typeof _[q_]<"u"))}function RC(_){return hT(_)==="[object Array]"&&PT(_)}function XR(_){return hT(_)==="[object Date]"&&PT(_)}function CA(_){return hT(_)==="[object RegExp]"&&PT(_)}function JR(_){return hT(_)==="[object Error]"&&PT(_)}function ZR(_){return hT(_)==="[object String]"&&PT(_)}function BR(_){return hT(_)==="[object Number]"&&PT(_)}function VR(_){return hT(_)==="[object Boolean]"&&PT(_)}function LA(_){if(pT)return _&&typeof _==="object"&&_ instanceof Symbol;if(typeof _==="symbol")return!0;if(!_||typeof _!=="object"||!AC)return!1;try{return AC.call(_),!0}catch(T){}return!1}function DR(_){if(!_||typeof _!=="object"||!CC)return!1;try{return CC.call(_),!0}catch(T){}return!1}var GR=Object.prototype.hasOwnProperty||function(_){return _ in this};function nT(_,T){return GR.call(_,T)}function hT(_){return SR.call(_)}function zR(_){if(_.name)return _.name;var T=qR.call(WR.call(_),/^function\s*([\w$]+)/);if(T)return T[1];return null}function HA(_,T){if(_.indexOf)return _.indexOf(T);for(var A=0,C=_.length;A<C;A++)if(_[A]===T)return A;return-1}function NR(_){if(!h_||!_||typeof _!=="object")return!1;try{h_.call(_);try{m_.call(_)}catch(T){return!0}return _ instanceof Map}catch(T){}return!1}function nR(_){if(!S_||!_||typeof _!=="object")return!1;try{S_.call(_,S_);try{W_.call(_,W_)}catch(T){return!0}return _ instanceof WeakMap}catch(T){}return!1}function KR(_){if(!oC||!_||typeof _!=="object")return!1;try{return oC.call(_),!0}catch(T){}return!1}function IR(_){if(!m_||!_||typeof _!=="object")return!1;try{m_.call(_);try{h_.call(_)}catch(T){return!0}return _ instanceof Set}catch(T){}return!1}function $R(_){if(!W_||!_||typeof _!=="object")return!1;try{W_.call(_,W_);try{S_.call(_,S_)}catch(T){return!0}return _ instanceof WeakSet}catch(T){}return!1}function hR(_){if(!_||typeof _!=="object")return!1;if(typeof HTMLElement<"u"&&_ instanceof HTMLElement)return!0;return typeof _.nodeName==="string"&&typeof _.getAttribute==="function"}function wA(_,T){if(_.length>T.maxStringLength){var A=_.length-T.maxStringLength,C="... "+A+" more character"+(A>1?"s":"");return wA(HC.call(_,0,T.maxStringLength),T)+C}var E=fR[T.quoteStyle||"single"];E.lastIndex=0;var R=$T.call($T.call(_,E,"\\$1"),/[\x00-\x1f]/g,mR);return xA(R,"single",T)}function mR(_){var T=_.charCodeAt(0),A={8:"b",9:"t",10:"n",12:"f",13:"r"}[T];if(A)return"\\"+A;return"\\x"+(T<16?"0":"")+YR.call(T.toString(16))}function F_(_){return"Object("+_+")"}function _C(_){return _+" { ? }"}function AA(_,T,A,C){var E=C?cC(A,C):BT.call(A,", ");return _+" ("+T+") {"+E+"}"}function OR(_){for(var T=0;T<_.length;T++)if(HA(_[T],`
`)>=0)return!1;return!0}function MR(_,T){var A;if(_.indent==="\t")A="\t";else if(typeof _.indent==="number"&&_.indent>0)A=BT.call(Array(_.indent+1)," ");else return null;return{base:A,prev:BT.call(Array(T+1),A)}}function cC(_,T){if(_.length===0)return"";var A=`
`+T.prev+T.base;return A+BT.call(_,","+A)+`
`+T.prev}function $_(_,T){var A=RC(_),C=[];if(A){C.length=_.length;for(var E=0;E<_.length;E++)C[E]=nT(_,E)?T(_[E],_):""}var R=typeof TC==="function"?TC(_):[],c;if(pT){c={};for(var w=0;w<R.length;w++)c["$"+R[w]]=R[w]}for(var L in _){if(!nT(_,L))continue;if(A&&String(Number(L))===L&&L<_.length)continue;if(pT&&c["$"+L]instanceof Symbol)continue;else if(EA.call(/[^\w$]/,L))C.push(T(L,_)+": "+T(_[L],_));else C.push(L+": "+T(_[L],_))}if(typeof TC==="function"){for(var Y=0;Y<R.length;Y++)if(RA.call(_,R[Y]))C.push("["+T(R[Y])+"]: "+T(_[R[Y]],_))}return C}});var WA=m((O4,SA)=>{var uR=Y_(),gR=gT(),O_=function(_,T,A){var C=_,E;for(;(E=C.next)!=null;C=E)if(E.key===T){if(C.next=E.next,!A)E.next=_.next,_.next=E;return E}},PR=function(_,T){if(!_)return;var A=O_(_,T);return A&&A.value},bR=function(_,T,A){var C=O_(_,T);if(C)C.value=A;else _.next={key:T,next:_.next,value:A}},kR=function(_,T){if(!_)return!1;return!!O_(_,T)},vR=function(_,T){if(_)return O_(_,T,!0)};SA.exports=function(){var T,A={assert:function(C){if(!A.has(C))throw new gR("Side channel does not contain "+uR(C))},delete:function(C){var E=T&&T.next,R=vR(T,C);if(R&&E&&E===R)T=void 0;return!!R},get:function(C){return PR(T,C)},has:function(C){return kR(T,C)},set:function(C,E){if(!T)T={next:void 0};bR(T,C,E)}};return A}});var wC=m((M4,qA)=>{qA.exports=Object});var QA=m((u4,YA)=>{YA.exports=Error});var UA=m((g4,fA)=>{fA.exports=EvalError});var JA=m((P4,XA)=>{XA.exports=RangeError});var BA=m((b4,ZA)=>{ZA.exports=ReferenceError});var DA=m((k4,VA)=>{VA.exports=SyntaxError});var zA=m((v4,GA)=>{GA.exports=URIError});var nA=m((l4,NA)=>{NA.exports=Math.abs});var IA=m((y4,KA)=>{KA.exports=Math.floor});var hA=m((j4,$A)=>{$A.exports=Math.max});var OA=m((d4,mA)=>{mA.exports=Math.min});var uA=m((s4,MA)=>{MA.exports=Math.pow});var PA=m((i4,gA)=>{gA.exports=Math.round});var kA=m((o4,bA)=>{bA.exports=Number.isNaN||function(T){return T!==T}});var lA=m((p4,vA)=>{var lR=kA();vA.exports=function(T){if(lR(T)||T===0)return T;return T<0?-1:1}});var jA=m((r4,yA)=>{yA.exports=Object.getOwnPropertyDescriptor});var FC=m((t4,dA)=>{var M_=jA();if(M_)try{M_([],"length")}catch(_){M_=null}dA.exports=M_});var iA=m((e4,sA)=>{var u_=Object.defineProperty||!1;if(u_)try{u_({},"a",{value:1})}catch(_){u_=!1}sA.exports=u_});var pA=m((a4,oA)=>{oA.exports=function(){if(typeof Symbol!=="function"||typeof Object.getOwnPropertySymbols!=="function")return!1;if(typeof Symbol.iterator==="symbol")return!0;var T={},A=Symbol("test"),C=Object(A);if(typeof A==="string")return!1;if(Object.prototype.toString.call(A)!=="[object Symbol]")return!1;if(Object.prototype.toString.call(C)!=="[object Symbol]")return!1;var E=42;T[A]=E;for(var R in T)return!1;if(typeof Object.keys==="function"&&Object.keys(T).length!==0)return!1;if(typeof Object.getOwnPropertyNames==="function"&&Object.getOwnPropertyNames(T).length!==0)return!1;var c=Object.getOwnPropertySymbols(T);if(c.length!==1||c[0]!==A)return!1;if(!Object.prototype.propertyIsEnumerable.call(T,A))return!1;if(typeof Object.getOwnPropertyDescriptor==="function"){var w=Object.getOwnPropertyDescriptor(T,A);if(w.value!==E||w.enumerable!==!0)return!1}return!0}});var eA=m((Tx,tA)=>{var rA=typeof Symbol<"u"&&Symbol,yR=pA();tA.exports=function(){if(typeof rA!=="function")return!1;if(typeof Symbol!=="function")return!1;if(typeof rA("foo")!=="symbol")return!1;if(typeof Symbol("bar")!=="symbol")return!1;return yR()}});var SC=m((_x,aA)=>{aA.exports=typeof Reflect<"u"&&Reflect.getPrototypeOf||null});var WC=m((Cx,TE)=>{var jR=wC();TE.exports=jR.getPrototypeOf||null});var AE=m((Ax,CE)=>{var dR="Function.prototype.bind called on incompatible ",sR=Object.prototype.toString,iR=Math.max,oR="[object Function]",_E=function(T,A){var C=[];for(var E=0;E<T.length;E+=1)C[E]=T[E];for(var R=0;R<A.length;R+=1)C[R+T.length]=A[R];return C},pR=function(T,A){var C=[];for(var E=A||0,R=0;E<T.length;E+=1,R+=1)C[R]=T[E];return C},rR=function(_,T){var A="";for(var C=0;C<_.length;C+=1)if(A+=_[C],C+1<_.length)A+=T;return A};CE.exports=function(T){var A=this;if(typeof A!=="function"||sR.apply(A)!==oR)throw TypeError(dR+A);var C=pR(arguments,1),E,R=function(){if(this instanceof E){var F=A.apply(this,_E(C,arguments));if(Object(F)===F)return F;return this}return A.apply(T,_E(C,arguments))},c=iR(0,A.length-C.length),w=[];for(var L=0;L<c;L++)w[L]="$"+L;if(E=Function("binder","return function ("+rR(w,",")+"){ return binder.apply(this,arguments); }")(R),A.prototype){var Y=function(){};Y.prototype=A.prototype,E.prototype=new Y,Y.prototype=null}return E}});var Q_=m((Ex,EE)=>{var tR=AE();EE.exports=Function.prototype.bind||tR});var g_=m((Rx,RE)=>{RE.exports=Function.prototype.call});var qC=m((cx,cE)=>{cE.exports=Function.prototype.apply});var LE=m((xx,xE)=>{xE.exports=typeof Reflect<"u"&&Reflect&&Reflect.apply});var wE=m((Lx,HE)=>{var eR=Q_(),aR=qC(),Tc=g_(),_c=LE();HE.exports=_c||eR.call(Tc,aR)});var YC=m((Hx,FE)=>{var Cc=Q_(),Ac=gT(),Ec=g_(),Rc=wE();FE.exports=function(T){if(T.length<1||typeof T[0]!=="function")throw new Ac("a function is required");return Rc(Cc,Ec,T)}});var fE=m((wx,QE)=>{var cc=YC(),SE=FC(),qE;try{qE=[].__proto__===Array.prototype}catch(_){if(!_||typeof _!=="object"||!("code"in _)||_.code!=="ERR_PROTO_ACCESS")throw _}var QC=!!qE&&SE&&SE(Object.prototype,"__proto__"),YE=Object,WE=YE.getPrototypeOf;QE.exports=QC&&typeof QC.get==="function"?cc([QC.get]):typeof WE==="function"?function(T){return WE(T==null?T:YE(T))}:!1});var BE=m((Fx,ZE)=>{var UE=SC(),XE=WC(),JE=fE();ZE.exports=UE?function(T){return UE(T)}:XE?function(T){if(!T||typeof T!=="object"&&typeof T!=="function")throw TypeError("getProto: not an object");return XE(T)}:JE?function(T){return JE(T)}:null});var DE=m((Sx,VE)=>{var xc=Function.prototype.call,Lc=Object.prototype.hasOwnProperty,Hc=Q_();VE.exports=Hc.call(xc,Lc)});var k_=m((Wx,KE)=>{var g,wc=wC(),Fc=QA(),Sc=UA(),Wc=JA(),qc=BA(),aT=DA(),eT=gT(),Yc=zA(),Qc=nA(),fc=IA(),Uc=hA(),Xc=OA(),Jc=uA(),Zc=PA(),Bc=lA(),NE=Function,fC=function(_){try{return NE('"use strict"; return ('+_+").constructor;")()}catch(T){}},f_=FC(),Vc=iA(),UC=function(){throw new eT},Dc=f_?function(){try{return arguments.callee,UC}catch(_){try{return f_(arguments,"callee").get}catch(T){return UC}}}():UC,rT=eA()(),t=BE(),Gc=WC(),zc=SC(),nE=qC(),U_=g_(),tT={},Nc=typeof Uint8Array>"u"||!t?g:t(Uint8Array),bT={__proto__:null,"%AggregateError%":typeof AggregateError>"u"?g:AggregateError,"%Array%":Array,"%ArrayBuffer%":typeof ArrayBuffer>"u"?g:ArrayBuffer,"%ArrayIteratorPrototype%":rT&&t?t([][Symbol.iterator]()):g,"%AsyncFromSyncIteratorPrototype%":g,"%AsyncFunction%":tT,"%AsyncGenerator%":tT,"%AsyncGeneratorFunction%":tT,"%AsyncIteratorPrototype%":tT,"%Atomics%":typeof Atomics>"u"?g:Atomics,"%BigInt%":typeof BigInt>"u"?g:BigInt,"%BigInt64Array%":typeof BigInt64Array>"u"?g:BigInt64Array,"%BigUint64Array%":typeof BigUint64Array>"u"?g:BigUint64Array,"%Boolean%":Boolean,"%DataView%":typeof DataView>"u"?g:DataView,"%Date%":Date,"%decodeURI%":decodeURI,"%decodeURIComponent%":decodeURIComponent,"%encodeURI%":encodeURI,"%encodeURIComponent%":encodeURIComponent,"%Error%":Fc,"%eval%":eval,"%EvalError%":Sc,"%Float16Array%":typeof Float16Array>"u"?g:Float16Array,"%Float32Array%":typeof Float32Array>"u"?g:Float32Array,"%Float64Array%":typeof Float64Array>"u"?g:Float64Array,"%FinalizationRegistry%":typeof FinalizationRegistry>"u"?g:FinalizationRegistry,"%Function%":NE,"%GeneratorFunction%":tT,"%Int8Array%":typeof Int8Array>"u"?g:Int8Array,"%Int16Array%":typeof Int16Array>"u"?g:Int16Array,"%Int32Array%":typeof Int32Array>"u"?g:Int32Array,"%isFinite%":isFinite,"%isNaN%":isNaN,"%IteratorPrototype%":rT&&t?t(t([][Symbol.iterator]())):g,"%JSON%":typeof JSON==="object"?JSON:g,"%Map%":typeof Map>"u"?g:Map,"%MapIteratorPrototype%":typeof Map>"u"||!rT||!t?g:t(new Map()[Symbol.iterator]()),"%Math%":Math,"%Number%":Number,"%Object%":wc,"%Object.getOwnPropertyDescriptor%":f_,"%parseFloat%":parseFloat,"%parseInt%":parseInt,"%Promise%":typeof Promise>"u"?g:Promise,"%Proxy%":typeof Proxy>"u"?g:Proxy,"%RangeError%":Wc,"%ReferenceError%":qc,"%Reflect%":typeof Reflect>"u"?g:Reflect,"%RegExp%":RegExp,"%Set%":typeof Set>"u"?g:Set,"%SetIteratorPrototype%":typeof Set>"u"||!rT||!t?g:t(new Set()[Symbol.iterator]()),"%SharedArrayBuffer%":typeof SharedArrayBuffer>"u"?g:SharedArrayBuffer,"%String%":String,"%StringIteratorPrototype%":rT&&t?t(""[Symbol.iterator]()):g,"%Symbol%":rT?Symbol:g,"%SyntaxError%":aT,"%ThrowTypeError%":Dc,"%TypedArray%":Nc,"%TypeError%":eT,"%Uint8Array%":typeof Uint8Array>"u"?g:Uint8Array,"%Uint8ClampedArray%":typeof Uint8ClampedArray>"u"?g:Uint8ClampedArray,"%Uint16Array%":typeof Uint16Array>"u"?g:Uint16Array,"%Uint32Array%":typeof Uint32Array>"u"?g:Uint32Array,"%URIError%":Yc,"%WeakMap%":typeof WeakMap>"u"?g:WeakMap,"%WeakRef%":typeof WeakRef>"u"?g:WeakRef,"%WeakSet%":typeof WeakSet>"u"?g:WeakSet,"%Function.prototype.call%":U_,"%Function.prototype.apply%":nE,"%Object.defineProperty%":Vc,"%Object.getPrototypeOf%":Gc,"%Math.abs%":Qc,"%Math.floor%":fc,"%Math.max%":Uc,"%Math.min%":Xc,"%Math.pow%":Jc,"%Math.round%":Zc,"%Math.sign%":Bc,"%Reflect.getPrototypeOf%":zc};if(t)try{null.error}catch(_){XC=t(t(_)),bT["%Error.prototype%"]=XC}var XC,nc=function _(T){var A;if(T==="%AsyncFunction%")A=fC("async function () {}");else if(T==="%GeneratorFunction%")A=fC("function* () {}");else if(T==="%AsyncGeneratorFunction%")A=fC("async function* () {}");else if(T==="%AsyncGenerator%"){var C=_("%AsyncGeneratorFunction%");if(C)A=C.prototype}else if(T==="%AsyncIteratorPrototype%"){var E=_("%AsyncGenerator%");if(E&&t)A=t(E.prototype)}return bT[T]=A,A},GE={__proto__:null,"%ArrayBufferPrototype%":["ArrayBuffer","prototype"],"%ArrayPrototype%":["Array","prototype"],"%ArrayProto_entries%":["Array","prototype","entries"],"%ArrayProto_forEach%":["Array","prototype","forEach"],"%ArrayProto_keys%":["Array","prototype","keys"],"%ArrayProto_values%":["Array","prototype","values"],"%AsyncFunctionPrototype%":["AsyncFunction","prototype"],"%AsyncGenerator%":["AsyncGeneratorFunction","prototype"],"%AsyncGeneratorPrototype%":["AsyncGeneratorFunction","prototype","prototype"],"%BooleanPrototype%":["Boolean","prototype"],"%DataViewPrototype%":["DataView","prototype"],"%DatePrototype%":["Date","prototype"],"%ErrorPrototype%":["Error","prototype"],"%EvalErrorPrototype%":["EvalError","prototype"],"%Float32ArrayPrototype%":["Float32Array","prototype"],"%Float64ArrayPrototype%":["Float64Array","prototype"],"%FunctionPrototype%":["Function","prototype"],"%Generator%":["GeneratorFunction","prototype"],"%GeneratorPrototype%":["GeneratorFunction","prototype","prototype"],"%Int8ArrayPrototype%":["Int8Array","prototype"],"%Int16ArrayPrototype%":["Int16Array","prototype"],"%Int32ArrayPrototype%":["Int32Array","prototype"],"%JSONParse%":["JSON","parse"],"%JSONStringify%":["JSON","stringify"],"%MapPrototype%":["Map","prototype"],"%NumberPrototype%":["Number","prototype"],"%ObjectPrototype%":["Object","prototype"],"%ObjProto_toString%":["Object","prototype","toString"],"%ObjProto_valueOf%":["Object","prototype","valueOf"],"%PromisePrototype%":["Promise","prototype"],"%PromiseProto_then%":["Promise","prototype","then"],"%Promise_all%":["Promise","all"],"%Promise_reject%":["Promise","reject"],"%Promise_resolve%":["Promise","resolve"],"%RangeErrorPrototype%":["RangeError","prototype"],"%ReferenceErrorPrototype%":["ReferenceError","prototype"],"%RegExpPrototype%":["RegExp","prototype"],"%SetPrototype%":["Set","prototype"],"%SharedArrayBufferPrototype%":["SharedArrayBuffer","prototype"],"%StringPrototype%":["String","prototype"],"%SymbolPrototype%":["Symbol","prototype"],"%SyntaxErrorPrototype%":["SyntaxError","prototype"],"%TypedArrayPrototype%":["TypedArray","prototype"],"%TypeErrorPrototype%":["TypeError","prototype"],"%Uint8ArrayPrototype%":["Uint8Array","prototype"],"%Uint8ClampedArrayPrototype%":["Uint8ClampedArray","prototype"],"%Uint16ArrayPrototype%":["Uint16Array","prototype"],"%Uint32ArrayPrototype%":["Uint32Array","prototype"],"%URIErrorPrototype%":["URIError","prototype"],"%WeakMapPrototype%":["WeakMap","prototype"],"%WeakSetPrototype%":["WeakSet","prototype"]},X_=Q_(),P_=DE(),Kc=X_.call(U_,Array.prototype.concat),Ic=X_.call(nE,Array.prototype.splice),zE=X_.call(U_,String.prototype.replace),b_=X_.call(U_,String.prototype.slice),$c=X_.call(U_,RegExp.prototype.exec),hc=/[^%.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|%$))/g,mc=/\\(\\)?/g,Oc=function(T){var A=b_(T,0,1),C=b_(T,-1);if(A==="%"&&C!=="%")throw new aT("invalid intrinsic syntax, expected closing `%`");else if(C==="%"&&A!=="%")throw new aT("invalid intrinsic syntax, expected opening `%`");var E=[];return zE(T,hc,function(R,c,w,L){E[E.length]=w?zE(L,mc,"$1"):c||R}),E},Mc=function(T,A){var C=T,E;if(P_(GE,C))E=GE[C],C="%"+E[0]+"%";if(P_(bT,C)){var R=bT[C];if(R===tT)R=nc(C);if(typeof R>"u"&&!A)throw new eT("intrinsic "+T+" exists, but is not available. Please file an issue!");return{alias:E,name:C,value:R}}throw new aT("intrinsic "+T+" does not exist!")};KE.exports=function(T,A){if(typeof T!=="string"||T.length===0)throw new eT("intrinsic name must be a non-empty string");if(arguments.length>1&&typeof A!=="boolean")throw new eT('"allowMissing" argument must be a boolean');if($c(/^%?[^%]*%?$/,T)===null)throw new aT("`%` may not be present anywhere but at the beginning and end of the intrinsic name");var C=Oc(T),E=C.length>0?C[0]:"",R=Mc("%"+E+"%",A),c=R.name,w=R.value,L=!1,Y=R.alias;if(Y)E=Y[0],Ic(C,Kc([0,1],Y));for(var F=1,J=!0;F<C.length;F+=1){var S=C[F],Z=b_(S,0,1),Q=b_(S,-1);if((Z==='"'||Z==="'"||Z==="`"||(Q==='"'||Q==="'"||Q==="`"))&&Z!==Q)throw new aT("property names with quotes must have matching quotes");if(S==="constructor"||!J)L=!0;if(E+="."+S,c="%"+E+"%",P_(bT,c))w=bT[c];else if(w!=null){if(!(S in w)){if(!A)throw new eT("base intrinsic for "+T+" exists, but the property is not available.");return}if(f_&&F+1>=C.length){var X=f_(w,S);if(J=!!X,J&&"get"in X&&!("originalValue"in X.get))w=X.get;else w=w[S]}else J=P_(w,S),w=w[S];if(J&&!L)bT[c]=w}}return w}});var JC=m((qx,hE)=>{var IE=k_(),$E=YC(),uc=$E([IE("%String.prototype.indexOf%")]);hE.exports=function(T,A){var C=IE(T,!!A);if(typeof C==="function"&&uc(T,".prototype.")>-1)return $E([C]);return C}});var ZC=m((Yx,OE)=>{var gc=k_(),J_=JC(),Pc=Y_(),bc=gT(),mE=gc("%Map%",!0),kc=J_("Map.prototype.get",!0),vc=J_("Map.prototype.set",!0),lc=J_("Map.prototype.has",!0),yc=J_("Map.prototype.delete",!0),jc=J_("Map.prototype.size",!0);OE.exports=!!mE&&function(){var T,A={assert:function(C){if(!A.has(C))throw new bc("Side channel does not contain "+Pc(C))},delete:function(C){if(T){var E=yc(T,C);if(jc(T)===0)T=void 0;return E}return!1},get:function(C){if(T)return kc(T,C)},has:function(C){if(T)return lc(T,C);return!1},set:function(C,E){if(!T)T=new mE;vc(T,C,E)}};return A}});var uE=m((Qx,ME)=>{var dc=k_(),l_=JC(),sc=Y_(),v_=ZC(),ic=gT(),T_=dc("%WeakMap%",!0),oc=l_("WeakMap.prototype.get",!0),pc=l_("WeakMap.prototype.set",!0),rc=l_("WeakMap.prototype.has",!0),tc=l_("WeakMap.prototype.delete",!0);ME.exports=T_?function(){var T,A,C={assert:function(E){if(!C.has(E))throw new ic("Side channel does not contain "+sc(E))},delete:function(E){if(T_&&E&&(typeof E==="object"||typeof E==="function")){if(T)return tc(T,E)}else if(v_){if(A)return A.delete(E)}return!1},get:function(E){if(T_&&E&&(typeof E==="object"||typeof E==="function")){if(T)return oc(T,E)}return A&&A.get(E)},has:function(E){if(T_&&E&&(typeof E==="object"||typeof E==="function")){if(T)return rc(T,E)}return!!A&&A.has(E)},set:function(E,R){if(T_&&E&&(typeof E==="object"||typeof E==="function")){if(!T)T=new T_;pc(T,E,R)}else if(v_){if(!A)A=v_();A.set(E,R)}}};return C}:v_});var PE=m((fx,gE)=>{var ec=gT(),ac=Y_(),T1=WA(),_1=ZC(),C1=uE(),A1=C1||_1||T1;gE.exports=function(){var T,A={assert:function(C){if(!A.has(C))throw new ec("Side channel does not contain "+ac(C))},delete:function(C){return!!T&&T.delete(C)},get:function(C){return T&&T.get(C)},has:function(C){return!!T&&T.has(C)},set:function(C,E){if(!T)T=A1();T.set(C,E)}};return A}});var y_=m((Ux,bE)=>{var E1=String.prototype.replace,R1=/%20/g,BC={RFC1738:"RFC1738",RFC3986:"RFC3986"};bE.exports={default:BC.RFC3986,formatters:{RFC1738:function(_){return E1.call(_,R1,"+")},RFC3986:function(_){return String(_)}},RFC1738:BC.RFC1738,RFC3986:BC.RFC3986}});var GC=m((Xx,vE)=>{var c1=y_(),VC=Object.prototype.hasOwnProperty,kT=Array.isArray,VT=function(){var _=[];for(var T=0;T<256;++T)_.push("%"+((T<16?"0":"")+T.toString(16)).toUpperCase());return _}(),x1=function(T){while(T.length>1){var A=T.pop(),C=A.obj[A.prop];if(kT(C)){var E=[];for(var R=0;R<C.length;++R)if(typeof C[R]<"u")E.push(C[R]);A.obj[A.prop]=E}}},kE=function(T,A){var C=A&&A.plainObjects?{__proto__:null}:{};for(var E=0;E<T.length;++E)if(typeof T[E]<"u")C[E]=T[E];return C},L1=function _(T,A,C){if(!A)return T;if(typeof A!=="object"&&typeof A!=="function"){if(kT(T))T.push(A);else if(T&&typeof T==="object"){if(C&&(C.plainObjects||C.allowPrototypes)||!VC.call(Object.prototype,A))T[A]=!0}else return[T,A];return T}if(!T||typeof T!=="object")return[T].concat(A);var E=T;if(kT(T)&&!kT(A))E=kE(T,C);if(kT(T)&&kT(A))return A.forEach(function(R,c){if(VC.call(T,c)){var w=T[c];if(w&&typeof w==="object"&&R&&typeof R==="object")T[c]=_(w,R,C);else T.push(R)}else T[c]=R}),T;return Object.keys(A).reduce(function(R,c){var w=A[c];if(VC.call(R,c))R[c]=_(R[c],w,C);else R[c]=w;return R},E)},H1=function(T,A){return Object.keys(A).reduce(function(C,E){return C[E]=A[E],C},T)},w1=function(_,T,A){var C=_.replace(/\+/g," ");if(A==="iso-8859-1")return C.replace(/%[0-9a-f]{2}/gi,unescape);try{return decodeURIComponent(C)}catch(E){return C}},DC=1024,F1=function(T,A,C,E,R){if(T.length===0)return T;var c=T;if(typeof T==="symbol")c=Symbol.prototype.toString.call(T);else if(typeof T!=="string")c=String(T);if(C==="iso-8859-1")return escape(c).replace(/%u[0-9a-f]{4}/gi,function(Z){return"%26%23"+parseInt(Z.slice(2),16)+"%3B"});var w="";for(var L=0;L<c.length;L+=DC){var Y=c.length>=DC?c.slice(L,L+DC):c,F=[];for(var J=0;J<Y.length;++J){var S=Y.charCodeAt(J);if(S===45||S===46||S===95||S===126||S>=48&&S<=57||S>=65&&S<=90||S>=97&&S<=122||R===c1.RFC1738&&(S===40||S===41)){F[F.length]=Y.charAt(J);continue}if(S<128){F[F.length]=VT[S];continue}if(S<2048){F[F.length]=VT[192|S>>6]+VT[128|S&63];continue}if(S<55296||S>=57344){F[F.length]=VT[224|S>>12]+VT[128|S>>6&63]+VT[128|S&63];continue}J+=1,S=65536+((S&1023)<<10|Y.charCodeAt(J)&1023),F[F.length]=VT[240|S>>18]+VT[128|S>>12&63]+VT[128|S>>6&63]+VT[128|S&63]}w+=F.join("")}return w},S1=function(T){var A=[{obj:{o:T},prop:"o"}],C=[];for(var E=0;E<A.length;++E){var R=A[E],c=R.obj[R.prop],w=Object.keys(c);for(var L=0;L<w.length;++L){var Y=w[L],F=c[Y];if(typeof F==="object"&&F!==null&&C.indexOf(F)===-1)A.push({obj:c,prop:Y}),C.push(F)}}return x1(A),T},W1=function(T){return Object.prototype.toString.call(T)==="[object RegExp]"},q1=function(T){if(!T||typeof T!=="object")return!1;return!!(T.constructor&&T.constructor.isBuffer&&T.constructor.isBuffer(T))},Y1=function(T,A){return[].concat(T,A)},Q1=function(T,A){if(kT(T)){var C=[];for(var E=0;E<T.length;E+=1)C.push(A(T[E]));return C}return A(T)};vE.exports={arrayToObject:kE,assign:H1,combine:Y1,compact:S1,decode:w1,encode:F1,isBuffer:q1,isRegExp:W1,maybeMap:Q1,merge:L1}});var iE=m((Jx,sE)=>{var yE=PE(),j_=GC(),Z_=y_(),f1=Object.prototype.hasOwnProperty,jE={brackets:function(T){return T+"[]"},comma:"comma",indices:function(T,A){return T+"["+A+"]"},repeat:function(T){return T}},DT=Array.isArray,U1=Array.prototype.push,dE=function(_,T){U1.apply(_,DT(T)?T:[T])},X1=Date.prototype.toISOString,lE=Z_.default,r={addQueryPrefix:!1,allowDots:!1,allowEmptyArrays:!1,arrayFormat:"indices",charset:"utf-8",charsetSentinel:!1,commaRoundTrip:!1,delimiter:"&",encode:!0,encodeDotInKeys:!1,encoder:j_.encode,encodeValuesOnly:!1,filter:void 0,format:lE,formatter:Z_.formatters[lE],indices:!1,serializeDate:function(T){return X1.call(T)},skipNulls:!1,strictNullHandling:!1},J1=function(T){return typeof T==="string"||typeof T==="number"||typeof T==="boolean"||typeof T==="symbol"||typeof T==="bigint"},zC={},Z1=function _(T,A,C,E,R,c,w,L,Y,F,J,S,Z,Q,X,D,q,N){var U=T,V=N,K=0,a=!1;while((V=V.get(zC))!==void 0&&!a){var f=V.get(T);if(K+=1,typeof f<"u")if(f===K)throw RangeError("Cyclic object value");else a=!0;if(typeof V.get(zC)>"u")K=0}if(typeof F==="function")U=F(A,U);else if(U instanceof Date)U=Z(U);else if(C==="comma"&&DT(U))U=j_.maybeMap(U,function(lT){if(lT instanceof Date)return Z(lT);return lT});if(U===null){if(c)return Y&&!D?Y(A,r.encoder,q,"key",Q):A;U=""}if(J1(U)||j_.isBuffer(U)){if(Y){var P=D?A:Y(A,r.encoder,q,"key",Q);return[X(P)+"="+X(Y(U,r.encoder,q,"value",Q))]}return[X(A)+"="+X(String(U))]}var h=[];if(typeof U>"u")return h;var M;if(C==="comma"&&DT(U)){if(D&&Y)U=j_.maybeMap(U,Y);M=[{value:U.length>0?U.join(",")||null:void 0}]}else if(DT(F))M=F;else{var i=Object.keys(U);M=J?i.sort(J):i}var o=L?String(A).replace(/\./g,"%2E"):String(A),s=E&&DT(U)&&U.length===1?o+"[]":o;if(R&&DT(U)&&U.length===0)return s+"[]";for(var e=0;e<M.length;++e){var TT=M[e],AT=typeof TT==="object"&&TT&&typeof TT.value<"u"?TT.value:U[TT];if(w&&AT===null)continue;var IT=S&&L?String(TT).replace(/\./g,"%2E"):String(TT),z_=DT(U)?typeof C==="function"?C(s,IT):s:s+(S?"."+IT:"["+IT+"]");N.set(T,K);var A_=yE();A_.set(zC,N),dE(h,_(AT,z_,C,E,R,c,w,L,C==="comma"&&D&&DT(U)?null:Y,F,J,S,Z,Q,X,D,q,A_))}return h},B1=function(T){if(!T)return r;if(typeof T.allowEmptyArrays<"u"&&typeof T.allowEmptyArrays!=="boolean")throw TypeError("`allowEmptyArrays` option can only be `true` or `false`, when provided");if(typeof T.encodeDotInKeys<"u"&&typeof T.encodeDotInKeys!=="boolean")throw TypeError("`encodeDotInKeys` option can only be `true` or `false`, when provided");if(T.encoder!==null&&typeof T.encoder<"u"&&typeof T.encoder!=="function")throw TypeError("Encoder has to be a function.");var A=T.charset||r.charset;if(typeof T.charset<"u"&&T.charset!=="utf-8"&&T.charset!=="iso-8859-1")throw TypeError("The charset option must be either utf-8, iso-8859-1, or undefined");var C=Z_.default;if(typeof T.format<"u"){if(!f1.call(Z_.formatters,T.format))throw TypeError("Unknown format option provided.");C=T.format}var E=Z_.formatters[C],R=r.filter;if(typeof T.filter==="function"||DT(T.filter))R=T.filter;var c;if(T.arrayFormat in jE)c=T.arrayFormat;else if("indices"in T)c=T.indices?"indices":"repeat";else c=r.arrayFormat;if("commaRoundTrip"in T&&typeof T.commaRoundTrip!=="boolean")throw TypeError("`commaRoundTrip` must be a boolean, or absent");var w=typeof T.allowDots>"u"?T.encodeDotInKeys===!0?!0:r.allowDots:!!T.allowDots;return{addQueryPrefix:typeof T.addQueryPrefix==="boolean"?T.addQueryPrefix:r.addQueryPrefix,allowDots:w,allowEmptyArrays:typeof T.allowEmptyArrays==="boolean"?!!T.allowEmptyArrays:r.allowEmptyArrays,arrayFormat:c,charset:A,charsetSentinel:typeof T.charsetSentinel==="boolean"?T.charsetSentinel:r.charsetSentinel,commaRoundTrip:!!T.commaRoundTrip,delimiter:typeof T.delimiter>"u"?r.delimiter:T.delimiter,encode:typeof T.encode==="boolean"?T.encode:r.encode,encodeDotInKeys:typeof T.encodeDotInKeys==="boolean"?T.encodeDotInKeys:r.encodeDotInKeys,encoder:typeof T.encoder==="function"?T.encoder:r.encoder,encodeValuesOnly:typeof T.encodeValuesOnly==="boolean"?T.encodeValuesOnly:r.encodeValuesOnly,filter:R,format:C,formatter:E,serializeDate:typeof T.serializeDate==="function"?T.serializeDate:r.serializeDate,skipNulls:typeof T.skipNulls==="boolean"?T.skipNulls:r.skipNulls,sort:typeof T.sort==="function"?T.sort:null,strictNullHandling:typeof T.strictNullHandling==="boolean"?T.strictNullHandling:r.strictNullHandling}};sE.exports=function(_,T){var A=_,C=B1(T),E,R;if(typeof C.filter==="function")R=C.filter,A=R("",A);else if(DT(C.filter))R=C.filter,E=R;var c=[];if(typeof A!=="object"||A===null)return"";var w=jE[C.arrayFormat],L=w==="comma"&&C.commaRoundTrip;if(!E)E=Object.keys(A);if(C.sort)E.sort(C.sort);var Y=yE();for(var F=0;F<E.length;++F){var J=E[F],S=A[J];if(C.skipNulls&&S===null)continue;dE(c,Z1(S,J,w,L,C.allowEmptyArrays,C.strictNullHandling,C.skipNulls,C.encodeDotInKeys,C.encode?C.encoder:null,C.filter,C.sort,C.allowDots,C.serializeDate,C.format,C.formatter,C.encodeValuesOnly,C.charset,Y))}var Z=c.join(C.delimiter),Q=C.addQueryPrefix===!0?"?":"";if(C.charsetSentinel)if(C.charset==="iso-8859-1")Q+="utf8=%26%2310003%3B&";else Q+="utf8=%E2%9C%93&";return Z.length>0?Q+Z:""}});var tE=m((Zx,rE)=>{var vT=GC(),NC=Object.prototype.hasOwnProperty,oE=Array.isArray,l={allowDots:!1,allowEmptyArrays:!1,allowPrototypes:!1,allowSparse:!1,arrayLimit:20,charset:"utf-8",charsetSentinel:!1,comma:!1,decodeDotInKeys:!1,decoder:vT.decode,delimiter:"&",depth:5,duplicates:"combine",ignoreQueryPrefix:!1,interpretNumericEntities:!1,parameterLimit:1000,parseArrays:!0,plainObjects:!1,strictDepth:!1,strictNullHandling:!1,throwOnLimitExceeded:!1},V1=function(_){return _.replace(/&#(\d+);/g,function(T,A){return String.fromCharCode(parseInt(A,10))})},pE=function(_,T,A){if(_&&typeof _==="string"&&T.comma&&_.indexOf(",")>-1)return _.split(",");if(T.throwOnLimitExceeded&&A>=T.arrayLimit)throw RangeError("Array limit exceeded. Only "+T.arrayLimit+" element"+(T.arrayLimit===1?"":"s")+" allowed in an array.");return _},D1="utf8=%26%2310003%3B",G1="utf8=%E2%9C%93",z1=function(T,A){var C={__proto__:null},E=A.ignoreQueryPrefix?T.replace(/^\?/,""):T;E=E.replace(/%5B/gi,"[").replace(/%5D/gi,"]");var R=A.parameterLimit===1/0?void 0:A.parameterLimit,c=E.split(A.delimiter,A.throwOnLimitExceeded?R+1:R);if(A.throwOnLimitExceeded&&c.length>R)throw RangeError("Parameter limit exceeded. Only "+R+" parameter"+(R===1?"":"s")+" allowed.");var w=-1,L,Y=A.charset;if(A.charsetSentinel){for(L=0;L<c.length;++L)if(c[L].indexOf("utf8=")===0){if(c[L]===G1)Y="utf-8";else if(c[L]===D1)Y="iso-8859-1";w=L,L=c.length}}for(L=0;L<c.length;++L){if(L===w)continue;var F=c[L],J=F.indexOf("]="),S=J===-1?F.indexOf("="):J+1,Z,Q;if(S===-1)Z=A.decoder(F,l.decoder,Y,"key"),Q=A.strictNullHandling?null:"";else Z=A.decoder(F.slice(0,S),l.decoder,Y,"key"),Q=vT.maybeMap(pE(F.slice(S+1),A,oE(C[Z])?C[Z].length:0),function(D){return A.decoder(D,l.decoder,Y,"value")});if(Q&&A.interpretNumericEntities&&Y==="iso-8859-1")Q=V1(String(Q));if(F.indexOf("[]=")>-1)Q=oE(Q)?[Q]:Q;var X=NC.call(C,Z);if(X&&A.duplicates==="combine")C[Z]=vT.combine(C[Z],Q);else if(!X||A.duplicates==="last")C[Z]=Q}return C},N1=function(_,T,A,C){var E=0;if(_.length>0&&_[_.length-1]==="[]"){var R=_.slice(0,-1).join("");E=Array.isArray(T)&&T[R]?T[R].length:0}var c=C?T:pE(T,A,E);for(var w=_.length-1;w>=0;--w){var L,Y=_[w];if(Y==="[]"&&A.parseArrays)L=A.allowEmptyArrays&&(c===""||A.strictNullHandling&&c===null)?[]:vT.combine([],c);else{L=A.plainObjects?{__proto__:null}:{};var F=Y.charAt(0)==="["&&Y.charAt(Y.length-1)==="]"?Y.slice(1,-1):Y,J=A.decodeDotInKeys?F.replace(/%2E/g,"."):F,S=parseInt(J,10);if(!A.parseArrays&&J==="")L={0:c};else if(!isNaN(S)&&Y!==J&&String(S)===J&&S>=0&&(A.parseArrays&&S<=A.arrayLimit))L=[],L[S]=c;else if(J!=="__proto__")L[J]=c}c=L}return c},n1=function(T,A,C,E){if(!T)return;var R=C.allowDots?T.replace(/\.([^.[]+)/g,"[$1]"):T,c=/(\[[^[\]]*])/,w=/(\[[^[\]]*])/g,L=C.depth>0&&c.exec(R),Y=L?R.slice(0,L.index):R,F=[];if(Y){if(!C.plainObjects&&NC.call(Object.prototype,Y)){if(!C.allowPrototypes)return}F.push(Y)}var J=0;while(C.depth>0&&(L=w.exec(R))!==null&&J<C.depth){if(J+=1,!C.plainObjects&&NC.call(Object.prototype,L[1].slice(1,-1))){if(!C.allowPrototypes)return}F.push(L[1])}if(L){if(C.strictDepth===!0)throw RangeError("Input depth exceeded depth option of "+C.depth+" and strictDepth is true");F.push("["+R.slice(L.index)+"]")}return N1(F,A,C,E)},K1=function(T){if(!T)return l;if(typeof T.allowEmptyArrays<"u"&&typeof T.allowEmptyArrays!=="boolean")throw TypeError("`allowEmptyArrays` option can only be `true` or `false`, when provided");if(typeof T.decodeDotInKeys<"u"&&typeof T.decodeDotInKeys!=="boolean")throw TypeError("`decodeDotInKeys` option can only be `true` or `false`, when provided");if(T.decoder!==null&&typeof T.decoder<"u"&&typeof T.decoder!=="function")throw TypeError("Decoder has to be a function.");if(typeof T.charset<"u"&&T.charset!=="utf-8"&&T.charset!=="iso-8859-1")throw TypeError("The charset option must be either utf-8, iso-8859-1, or undefined");if(typeof T.throwOnLimitExceeded<"u"&&typeof T.throwOnLimitExceeded!=="boolean")throw TypeError("`throwOnLimitExceeded` option must be a boolean");var A=typeof T.charset>"u"?l.charset:T.charset,C=typeof T.duplicates>"u"?l.duplicates:T.duplicates;if(C!=="combine"&&C!=="first"&&C!=="last")throw TypeError("The duplicates option must be either combine, first, or last");var E=typeof T.allowDots>"u"?T.decodeDotInKeys===!0?!0:l.allowDots:!!T.allowDots;return{allowDots:E,allowEmptyArrays:typeof T.allowEmptyArrays==="boolean"?!!T.allowEmptyArrays:l.allowEmptyArrays,allowPrototypes:typeof T.allowPrototypes==="boolean"?T.allowPrototypes:l.allowPrototypes,allowSparse:typeof T.allowSparse==="boolean"?T.allowSparse:l.allowSparse,arrayLimit:typeof T.arrayLimit==="number"?T.arrayLimit:l.arrayLimit,charset:A,charsetSentinel:typeof T.charsetSentinel==="boolean"?T.charsetSentinel:l.charsetSentinel,comma:typeof T.comma==="boolean"?T.comma:l.comma,decodeDotInKeys:typeof T.decodeDotInKeys==="boolean"?T.decodeDotInKeys:l.decodeDotInKeys,decoder:typeof T.decoder==="function"?T.decoder:l.decoder,delimiter:typeof T.delimiter==="string"||vT.isRegExp(T.delimiter)?T.delimiter:l.delimiter,depth:typeof T.depth==="number"||T.depth===!1?+T.depth:l.depth,duplicates:C,ignoreQueryPrefix:T.ignoreQueryPrefix===!0,interpretNumericEntities:typeof T.interpretNumericEntities==="boolean"?T.interpretNumericEntities:l.interpretNumericEntities,parameterLimit:typeof T.parameterLimit==="number"?T.parameterLimit:l.parameterLimit,parseArrays:T.parseArrays!==!1,plainObjects:typeof T.plainObjects==="boolean"?T.plainObjects:l.plainObjects,strictDepth:typeof T.strictDepth==="boolean"?!!T.strictDepth:l.strictDepth,strictNullHandling:typeof T.strictNullHandling==="boolean"?T.strictNullHandling:l.strictNullHandling,throwOnLimitExceeded:typeof T.throwOnLimitExceeded==="boolean"?T.throwOnLimitExceeded:!1}};rE.exports=function(_,T){var A=K1(T);if(_===""||_===null||typeof _>"u")return A.plainObjects?{__proto__:null}:{};var C=typeof _==="string"?z1(_,A):_,E=A.plainObjects?{__proto__:null}:{},R=Object.keys(C);for(var c=0;c<R.length;++c){var w=R[c],L=n1(w,C[w],A,typeof _==="string");E=vT.merge(E,L,A)}if(A.allowSparse===!0)return E;return vT.compact(E)}});var aE=m((Bx,eE)=>{var I1=iE(),$1=tE(),h1=y_();eE.exports={formats:h1,parse:$1,stringify:I1}});var UL=N_(n_(),1);var kC={};D0(kC,{zodSchemaKey:()=>z0,webSocketServerArgsKey:()=>QT,webSocketMessageArgsKey:()=>MT,webSocketKey:()=>YT,webSocketEventKey:()=>OT,webSocketEventArgumentsKey:()=>_T,webSocketConnectionArgsKey:()=>fT,webSocketCloseReasonArgsKey:()=>c_,webSocketCloseCodeArgsKey:()=>R_,routeModelArgsKey:()=>LT,responseStatusTextArgsKey:()=>t_,responseStatusArgsKey:()=>H_,responseHeadersArgsKey:()=>CT,responseBodyArgsKey:()=>L_,requestHeadersArgsKey:()=>UT,requestHeaderArgsKey:()=>cT,requestBodyArgsKey:()=>XT,requestArgsKey:()=>xT,queryArgsKey:()=>x_,paramsArgsKey:()=>iT,paramArgsKey:()=>JT,moduleKey:()=>qT,middlewareKey:()=>WT,interceptorKey:()=>mT,injectableKey:()=>NT,injectKey:()=>sT,httpServerArgsKey:()=>RT,guardKey:()=>zT,controllerKey:()=>ST,controllerHttpKey:()=>dT,contextArgsKey:()=>ZT,containerKey:()=>ET,configKey:()=>K_,argumentsKey:()=>k});var k=Symbol("__bool:arguments__"),_T=Symbol("__bool:webSocketEventArguments__"),K_=Symbol("__bool:config__"),ST=Symbol("__bool:controller__"),mT=Symbol("__bool:interceptor__"),zT=Symbol("__bool:guard__"),dT=Symbol("__bool:controller.http__"),sT=Symbol("__bool:inject__"),NT=Symbol("__bool:injectable__"),WT=Symbol("__bool:middleware__"),qT=Symbol("__bool:module__"),ET=Symbol("__bool:container__"),z0=Symbol("__bool:zodSchema__"),YT=Symbol("__bool:webSocket__"),OT=Symbol("__bool:webSocket:event__"),QT=Symbol("__bool:webSocketArguments:server__"),fT=Symbol("__bool:webSocketArguments:connection__"),MT=Symbol("__bool:webSocketArguments:message__"),R_=Symbol("__bool:webSocketArguments:closeCode__"),c_=Symbol("__bool:webSocketArguments:closeReason__"),RT=Symbol("__bool:httpArguments:server__"),UT=Symbol("__bool:httpArguments:requestHeaders__"),cT=Symbol("__bool:httpArguments:requestHeader__"),XT=Symbol("__bool:httpArguments:requestBody__"),iT=Symbol("__bool:httpArguments:params__"),JT=Symbol("__bool:httpArguments:param__"),x_=Symbol("__bool:httpArguments:query__"),xT=Symbol("__bool:httpArguments:request__"),CT=Symbol("__bool:httpArguments:responseHeaders__"),ZT=Symbol("__bool:httpArguments:context__"),LT=Symbol("__bool:httpArguments:routeModel__"),L_=Symbol("__bool:httpArguments:responseBody__"),H_=Symbol("__bool:httpArguments:responseStatus__"),t_=Symbol("__bool:httpArguments:responseStatusText__");var N0=(_)=>(T,A,C)=>{if(!A)return;let E=Reflect.getOwnMetadata(k,T.constructor,A)||{};E[`argumentIndexes.${C}`]={index:C,type:UT,validationSchema:_},Reflect.defineMetadata(k,E,T.constructor,A)},n0=(_,T)=>(A,C,E)=>{if(!C)return;let R=Reflect.getOwnMetadata(k,A.constructor,C)||{};R[`argumentIndexes.${E}`]={index:E,type:cT,key:_,validationSchema:T},Reflect.defineMetadata(k,R,A.constructor,C)},K0=(_,T)=>(A,C,E)=>{if(!C)return;let R=Reflect.getOwnMetadata(k,A.constructor,C)||{};R[`argumentIndexes.${E}`]={index:E,type:XT,validationSchema:_,parser:T},Reflect.defineMetadata(k,R,A.constructor,C)},I0=(_)=>(T,A,C)=>{if(!A)return;let E=Reflect.getOwnMetadata(k,T.constructor,A)||{};E[`argumentIndexes.${C}`]={index:C,type:iT,validationSchema:_},Reflect.defineMetadata(k,E,T.constructor,A)},$0=(_,T)=>(A,C,E)=>{if(!C)return;let R=Reflect.getOwnMetadata(k,A.constructor,C)||{};R[`argumentIndexes.${E}`]={index:E,type:JT,key:_,validationSchema:T},Reflect.defineMetadata(k,R,A.constructor,C)},h0=(_)=>(T,A,C)=>{if(!A)return;let E=Reflect.getOwnMetadata(k,T.constructor,A)||{};E[`argumentIndexes.${C}`]={index:C,type:x_,validationSchema:_},Reflect.defineMetadata(k,E,T.constructor,A)},m0=(_)=>(T,A,C)=>{if(!A)return;let E=Reflect.getOwnMetadata(k,T.constructor,A)||{};E[`argumentIndexes.${C}`]={index:C,type:xT,validationSchema:_},Reflect.defineMetadata(k,E,T.constructor,A)},O0=()=>(_,T,A)=>{if(!T)return;let C=Reflect.getOwnMetadata(k,_.constructor,T)||{};C[`argumentIndexes.${A}`]={index:A,type:CT},Reflect.defineMetadata(k,C,_.constructor,T)},M0=(_)=>(T,A,C)=>{if(!A)return;let E=Reflect.getOwnMetadata(k,T.constructor,A)||{};E[`argumentIndexes.${C}`]={index:C,type:ZT,key:_},Reflect.defineMetadata(k,E,T.constructor,A)},u0=()=>(_,T,A)=>{if(!T)return;let C=Reflect.getOwnMetadata(k,_.constructor,T)||{};C[`argumentIndexes.${A}`]={index:A,type:LT},Reflect.defineMetadata(k,C,_.constructor,T)},g0=()=>(_,T,A)=>{if(!T)return;let C=Reflect.getOwnMetadata(k,_.constructor,T)||{};C[`argumentIndexes.${A}`]={index:A,type:RT},Reflect.defineMetadata(k,C,_.constructor,T)};var P0=(_)=>(T)=>{let{modules:A,middlewares:C,guards:E,dependencies:R}=_||{};if(Reflect.hasOwnMetadata(qT,T))throw Error(`Conflict detected! ${T.name} class cannot be both a Module and a Container.`);if(A){for(let c=0;c<A.length;c++)if(!Reflect.getOwnMetadataKeys(A[c]).includes(qT))throw Error(`${A[c].name} is not a module.`)}if(C){for(let c=0;c<C.length;c++)if(!Reflect.getOwnMetadataKeys(C[c]).includes(WT))throw Error(`${C[c].name} is not a middleware.`)}if(C){for(let c=0;c<C.length;c++)if(!Reflect.getOwnMetadataKeys(C[c]).includes(WT))throw Error(`${C[c].name} is not a middleware.`)}if(E){for(let c=0;c<E.length;c++)if(!Reflect.getOwnMetadataKeys(E[c]).includes(zT))throw Error(`${E[c].name} is not a guard.`)}if(R){for(let c=0;c<R.length;c++)if(!Reflect.getOwnMetadataKeys(R[c]).includes(NT))throw Error(`${R[c].name} is not an injectable.`)}Reflect.defineMetadata(ET,_,T)};var b0=(_)=>(T)=>{let A={prefix:!_?.startsWith("/")?`/${_||""}`:_,httpMetadata:[...Reflect.getOwnMetadata(dT,T)||[]]};Reflect.defineMetadata(ST,A,T)};var k0=()=>(_)=>{if(!("enforce"in _.prototype)||typeof _.prototype.enforce!=="function")return;let T=void 0;return Reflect.defineMetadata(zT,T,_),_};var oT=(_,T)=>(A,C,E)=>{if(!(E?.value instanceof Function))throw Error(`${T} decorator only use for class method.`);let R=Reflect.getOwnMetadata(k,A.constructor,C)||{},c=[...Reflect.getOwnMetadata(dT,A.constructor)||[],{path:!_.startsWith("/")?`/${_}`:_,httpMethod:T.toUpperCase(),methodName:C,descriptor:E,argumentsMetadata:R}];Reflect.defineMetadata(dT,c,A.constructor)},v0=(_="/")=>oT(_,"Get"),l0=(_="/")=>oT(_,"Post"),y0=(_="/")=>oT(_,"Put"),j0=(_="/")=>oT(_,"Patch"),d0=(_="/")=>oT(_,"Delete"),s0=(_="/")=>oT(_,"Options");var i0=(_)=>(T,A,C)=>{let E=Reflect.getMetadata(sT,T)||[];E[C]=_,Reflect.defineMetadata(sT,E,T)};var o0=()=>(_)=>Reflect.defineMetadata(NT,void 0,_);var p0=()=>(_)=>{Reflect.defineMetadata(mT,void 0,_)};var r0=()=>(_)=>{Reflect.defineMetadata(WT,void 0,_)};var t0=(_)=>(T)=>{if(Reflect.hasOwnMetadata(ET,T))throw Error(`Conflict detected! ${T.name} class cannot be both a Module and a Container.`);let{middlewares:A,guards:C,interceptors:E,controllers:R,dependencies:c,webSockets:w}=_||{};if(A){for(let L=0;L<A.length;L++)if(!Reflect.getOwnMetadataKeys(A[L]).includes(WT))throw Error(`${A[L].name} is not a middleware.`)}if(C){for(let L=0;L<C.length;L++)if(!Reflect.getOwnMetadataKeys(C[L]).includes(zT))throw Error(`${C[L].name} is not a guard.`)}if(E){for(let L=0;L<E.length;L++)if(!Reflect.getOwnMetadataKeys(E[L]).includes(mT))throw Error(`${E[L].name} is not a interceptor.`)}if(R){for(let L=0;L<R.length;L++)if(!Reflect.getOwnMetadataKeys(R[L]).includes(ST))throw Error(`${R[L].name} is not a controller.`)}if(c){for(let L=0;L<c.length;L++)if(!Reflect.getOwnMetadataKeys(c[L]).includes(NT))throw Error(`${c[L].name} is not an injectable.`)}if(w){for(let L=0;L<w.length;L++)if(!Reflect.getOwnMetadataKeys(w[L]).includes(YT))throw Error(`${w[L].name} is not a websocket gateway.`)}Reflect.defineMetadata(qT,_,T)};var I_=Symbol("__bool:webSocket.upgrade__"),e0=(_,T,A)=>{let C=new URL(T.url);return _.upgrade(T,{data:{method:T.method.toUpperCase(),pathname:C.pathname,query:A}})},a0=(_)=>(T)=>{let{prefix:A}=_||{};T.prototype[I_]=e0;let C=Object.getOwnPropertyDescriptor(T.prototype,I_),E=!C?[]:[{path:"/",httpMethod:"GET",methodName:I_,descriptor:C,argumentsMetadata:{}},{path:"/",httpMethod:"POST",methodName:I_,descriptor:C,argumentsMetadata:{}}],R={prefix:!A?.startsWith("/")?`/${A||""}`:A,events:Reflect.getOwnMetadata(OT,T)||{},http:E};Reflect.defineMetadata(YT,R,T)};var TR=()=>(_,T,A)=>{if(!T)return;let C=Reflect.getOwnMetadata(_T,_.constructor,T)||{};C[`argumentIndexes.${A}`]={index:A,type:fT},Reflect.defineMetadata(_T,C,_.constructor,T)},_R=()=>(_,T,A)=>{if(!T)return;let C=Reflect.getOwnMetadata(_T,_.constructor,T)||{};C[`argumentIndexes.${A}`]={index:A,type:QT},Reflect.defineMetadata(_T,C,_.constructor,T)},CR=()=>(_,T,A)=>{if(!T)return;let C=Reflect.getOwnMetadata(_T,_.constructor,T)||{};C[`argumentIndexes.${A}`]={index:A,type:R_},Reflect.defineMetadata(_T,C,_.constructor,T)},AR=()=>(_,T,A)=>{if(!T)return;let C=Reflect.getOwnMetadata(_T,_.constructor,T)||{};C[`argumentIndexes.${A}`]={index:A,type:c_},Reflect.defineMetadata(_T,C,_.constructor,T)},ER=()=>(_,T,A)=>{if(!T)return;let C=Reflect.getOwnMetadata(_T,_.constructor,T)||{};C[`argumentIndexes.${A}`]={index:A,type:MT},Reflect.defineMetadata(_T,C,_.constructor,T)};var RR=(_)=>(T,A,C)=>{if(!(C.value instanceof Function))throw Error("WebSocketEvent decorator only use for class's method.");let E=Reflect.getOwnMetadata(_T,T.constructor,A),R=Object.freeze({methodName:A,descriptor:C,arguments:E}),c={...Reflect.getOwnMetadata(OT,T.constructor)||void 0,[_]:R};Reflect.defineMetadata(OT,R,T.constructor,A),Reflect.defineMetadata(OT,c,T.constructor)};var cR=Object.freeze({400:"BAD_REQUEST",401:"UNAUTHORIZED",402:"PAYMENT_REQUIRED",403:"FORBIDDEN",404:"NOT_FOUND",405:"METHOD_NOT_ALLOWED",406:"NOT_ACCEPTABLE",407:"PROXY_AUTHENCATION_REQUIRED",408:"REQUEST_TIMEOUT",409:"CONFLICT",410:"GONE",411:"LENGTH_REQUIRED",412:"PRECONDITION_FAILED",413:"PAYLOAD_TOO_LARGE",414:"URI_TOO_LONG",415:"UNSUPPORTED_MEDIA_TYPE",416:"RANGE_NOT_SATISFIABLE",417:"EXPECTATION_FAILED",418:"IM_A_TEAPOT",421:"MISDIRECTED_REQUEST",422:"UNPROCESSABLE_ENTITY",423:"LOCKED",424:"FAILED_DEPENDENCY",425:"TOO_EARLY_",426:"UPGRAGE_REQUIRED",428:"PRECONDITION_REQUIRED",429:"TOO_MANY_REQUESTS",431:"REQUEST_HEADER_FIELDS_TOO_LARGE",451:"UNAVAILABLE_FOR_LEGAL_REASONS"});class uT extends Error{httpCode;message;data;constructor({httpCode:_,data:T,message:A}){super();this.httpCode=_,this.message=!A?.trim()?cR[_]:A.trim(),this.data=T}}var xR=Object.freeze({500:"INTERNAL_SERVER_ERROR",501:"NOT_IMPLEMENTED",502:"BAD_GATEWAY",503:"SERVICE_UNAVAILABLE",504:"GATEWAY_TIMEOUT",505:"HTTP_VERSION_NOT_SUPPORTED",506:"VARIANT_ALSO_NEGOTIATES",507:"INSUFFICIENT_STORAGE",508:"LOOP_DETECTED",510:"NOT_EXTENDED",511:"NETWORK_AUTHENTICATION_REQUIRED"});class w_ extends Error{httpCode;message;data;constructor({httpCode:_,data:T,message:A}){super();this.httpCode=_,this.message=!A?.trim()?xR[_]:A.trim(),this.data=T}}var vC=(_,T=new Headers)=>{if(T.set("Content-Type","application/json"),_ instanceof uT||_ instanceof w_)return new Response(JSON.stringify(_),{status:_.httpCode,statusText:_.message,headers:T});return new Response(JSON.stringify((()=>{switch(typeof _){case"object":return!(_ instanceof Error)?_:{message:_.message,code:_.name,cause:_.cause};case"string":return{message:_};case"number":return{code:_};default:return}})()),{status:500,statusText:"INTERNAL SERVER ERROR",headers:T})};var HT;(function(_){_.year="year",_.month="month",_.day="day",_.hours="hours",_.minutes="minutes",_.seconds="seconds",_.miliseconds="miliseconds"})(HT||(HT={}));var lC=(_,T,A=HT.day)=>{let C=_ instanceof Date?_:new Date(_);switch(A){case HT.year:C.setFullYear(C.getFullYear()+T);break;case HT.month:C.setMonth(C.getMonth()+T);break;case HT.day:C.setDate(C.getDate()+T);break;case HT.hours:C.setHours(C.getHours()+T);break;case HT.minutes:C.setMinutes(C.getMinutes()+T);break;case HT.seconds:C.setSeconds(C.getSeconds()+T);break;case HT.miliseconds:C.setMilliseconds(C.getMilliseconds()+T);break}return C};var R0=N_(aE(),1);var Vx=async function(){}.constructor;var T0=Object.freeze({black:30,red:31,green:32,yellow:33,blue:34,magenta:35,cyan:36,white:37,gray:90}),_0=Object.freeze({black:40,red:41,green:42,yellow:43,blue:44,magenta:45,cyan:46,white:47,gray:100}),KT=(_,T={})=>{let{color:A,backgroundColor:C,bold:E,underline:R}=T,c="";if(E)c+="\x1B[1m";if(R)c+="\x1B[4m";if(A&&T0[A])c+=`\x1B[${T0[A]}m`;if(C&&_0[C])c+=`\x1B[${_0[C]}m`;return`${c}${_}\x1B[0m`};var C0=(_)=>{let{headers:T,method:A}=_,C=T.get("upgrade")?.toLowerCase()||"",E=T.get("connection")?.toLowerCase()||"";return A==="GET"&&C?.toLowerCase()==="websocket"&&E?.toLowerCase().includes("upgrade")};class B_{_staticMap=new Map;_dynamicMap=new Map;_options=void 0;constructor(..._){_.forEach((T)=>{T.staticEntries.forEach(([A,C])=>this.set(A,C,{isStatic:!0,isPassthrough:!0})),T.dynamicEntries.forEach(([A,C])=>this.set(A,C,{isStatic:!1}))})}get(_,T){return!(T||this._options)?.isStatic?this._dynamicMap.get(_):this._staticMap.get(_)}has(_,T){return!(T||this._options)?.isStatic?this._dynamicMap.has(_):this._staticMap.has(_)}set(_,T,A){let C=A||this._options;if(!C?.isStatic)this._dynamicMap.set(_,T);else if(!this._staticMap.has(_))this._staticMap.set(_,T);else if(!C.isPassthrough)throw Error(`${String(_)} already exists in context static collection.`);return this}setOptions(_){return this._options=_,this}get staticEntries(){return[...this._staticMap.entries()]}get dynamicEntries(){return[...this._dynamicMap.entries()]}}class GT{static rootPattern=":([a-z0-9A-Z_-]{1,})";static innerRootPattern="([a-z0-9A-Z_-]{1,})";alias;_map=new Map;constructor(_){this.alias=this._thinAlias(_)}test(_,T){try{let A=this._map.get(T),C=this.alias.split("/"),E=this._thinAlias(_).split("/");if(!A)return;if(C.length!==E.length)return;let R=Object(),c=this.alias.replace(new RegExp(GT.rootPattern,"g"),GT.innerRootPattern);if(!new RegExp(c).test(this._thinAlias(_)))return;for(let w=0;w<C.length;w++){let L=C[w],Y=E[w];if(!new RegExp(GT.rootPattern,"g").test(L)){if(L!==Y)return}else{let F=!1;if(L.replace(new RegExp(GT.rootPattern,"g"),(J,S,Z)=>{if(Z===0)Y.replace(new RegExp(GT.innerRootPattern,"g"),(Q,X,D)=>{if(D===0)Object.assign(R,{[S]:Q});return Q});return J}),F)return}continue}return Object.freeze({parameters:R,model:A})}catch(A){return console.error(A),!1}}isMatch(_,T){try{if(!this._map.get(T))return;let C=this.alias.split("/"),E=this._thinAlias(_).split("/");if(C.length!==E.length)return!1;let R=Object();for(let c=0;c<C.length;c++){let w=C[c],L=E[c];if(!new RegExp(GT.rootPattern,"g").test(w)){if(w!==L)return!1}else{let Y=!1;if(w.replace(new RegExp(GT.rootPattern,"g"),(F,J,S)=>{if(!new RegExp(S,"g").test(L))Y=!0;else Object.assign(R,{[J]:L});return""}),Y)return!1}continue}return!0}catch(A){console.error(A);return}}get(_){if(!this._map.get("GET"))this._map.set("GET",_);return this}post(_){if(!this._map.get("POST"))this._map.set("POST",_);return this}put(_){if(!this._map.get("PUT"))this._map.set("PUT",_);return this}delete(_){if(!this._map.get("DELETE"))this._map.set("DELETE",_);return this}connect(_){if(!this._map.get("CONNECT"))return this._map.set("CONNECT",_);return this}options(_){if(!this._map.get("OPTIONS"))return this._map.set("OPTIONS",_);return this}trace(_){if(!this._map.get("TRACE"))return this._map.set("TRACE",_);return this}patch(_){if(!this._map.get("PATCH"))return this._map.set("PATCH",_);return this}_thinAlias(_){return _.replace(new RegExp("[/]{2,}","g"),"/").replace(new RegExp("^[/]|[/]$","g"),"")}get _fullPath(){return this.alias.split("/").map((A,C)=>{let E=new RegExp(":([a-z0-9A-Z_.-]{1,})(\\(.*?\\))","g");if(!E.test(A)){if(E=new RegExp(":([a-z0-9A-Z_.-]{1,})","g"),!E.test(A))return A;return A.replace(E,(R,c)=>`${R}(.*?)`)}return A}).join("/")}get _filteredPath(){return this.alias.split("/").map((A,C)=>{let E=new RegExp(":([a-z0-9A-Z_.-]{1,})((.*?))","g");if(!E.test(A)){if(E=new RegExp(":([a-z0-9A-Z_.-]{1,})","g"),!E.test(A))return A;return A.replace(E,(R,c)=>"(.*?)")}return A.replace(E,(R,c,w)=>w)}).join("/")}}var A0=GT;class V_{alias;_routes=new Map;constructor(_){this.alias=this._thinAlias(_)}route(_){let T=this._thinAlias(`${this.alias}/${_}`),A=this._routes.get(T),C=!A?new A0(`${this.alias}/${_}`):A;if(!A)this._routes.set(T,C);return C}_thinAlias(_){return _.replace(new RegExp("[/]{2,}","g"),"/").replace(new RegExp("^[/]|[/]$","g"),"")}get routes(){return this._routes}}class D_{_routers=new Map;add(..._){for(let T of _){if(this._routers.has(T.alias))continue;this._routers.set(T.alias,T)}return this}find(_,T){for(let A of this._routers.values())for(let C of A.routes.values()){let E=C.test(_,T);if(!E)continue;return E}return}}var gx=N_(n_(),1);class __{_mapper=new Map;constructor(..._){_.forEach((T)=>{T.entries.forEach(([A,C])=>{this._mapper.set(A,C)})})}get(_){if(this._mapper.has(_))return this._mapper.get(_);if(typeof _!=="function")return;let T=Reflect.getMetadataKeys(_);if(![NT,ST,WT,zT,mT,YT].some((R)=>T.includes(R)))throw Error("Missing dependency declaration, please check @Injectable() used on dependency(ies).");let C=(Reflect.getOwnMetadata(sT,_)||[]).map((R)=>this.get(R)),E=new _(...C);return this._mapper.set(_,E),E}set(_,T){if(this._mapper.has(_))throw Error(`${String(_)} already exists in injector collection.`);this._mapper.set(_,T)}get entries(){return[...this._mapper.entries()]}}class nC{error;constructor(_){this.error=_}}var E0=nC;class d_{eventName;metadata;_context=void 0;constructor({eventName:_,metadata:T}){this.eventName=_,this.metadata=T}bind(_){return this._context=_,this}execute(){if(this._context&&typeof this.metadata.descriptor.value==="function")this.metadata.descriptor.value=this.metadata.descriptor.value.bind(this._context);return Object.freeze({methodName:this.metadata.methodName,descriptor:this.metadata.descriptor,arguments:this.metadata.arguments})}}class G_{rawAlias;alias;routes=[];constructor(_="/"){this.rawAlias=_;this.alias=G_.thinAlias(_)}addRoutes(..._){for(let T of _)if(!this.routes.includes(T))this.routes.push(T);return this}bind(_){for(let T of this.routes)T.bind(_);return this}execute(){let _=new Map;for(let T of this.routes)_.set(`${this.alias}:::${T.eventName}`,T.execute());return _}static thinAlias(_){return _.replace(new RegExp("[/]{2,}","g"),"/").replace(new RegExp("^[/]|[/]$","g"),"")}}class C_{rawPrefix;prefix;routers=[];constructor(_="/"){this.rawPrefix=_;this.prefix=C_.thinPrefix(_)}addRouters(..._){for(let T=0;T<_.length;T++)if(!this.routers.includes(_[T]))this.routers.push(_[T]);for(let T of _)if(!this.routers.includes(T))this.routers.push(T);return this}execute(){let _=new Map;for(let T of this.routers){let A=T.execute();for(let[C,E]of A.entries())_.set(`/${C_.thinPrefix(`${this.prefix}/${C}`)}`,E)}return _}static thinPrefix(_){return _.replace(new RegExp("[/]{2,}","g"),"/").replace(new RegExp("^[/]|[/]$","g"),"")}}class s_{classConstructor;options;#_;#T;#E=new __;#C=new Map;#R;#c=900;#A;constructor(_,T){this.classConstructor=_;this.options=T;if(this.#T=Reflect.getOwnMetadataKeys(_),!this.#T.includes(ET)&&!this.#T.includes(qT))throw Error(`Can not detect! ${_.name} class is not a container or module.`);this.#c=typeof T.static?.cacheTimeInSeconds!=="number"?900:T.static.cacheTimeInSeconds,this.#R=Object.freeze({allowLogsMethods:this.options?.log?.methods||[],staticOption:this.options.static,allowOrigins:!this.options.cors?.origins?["*"]:typeof this.options.cors.origins!=="string"?this.options.cors.origins.includes("*")||this.options.cors.origins.length<1?["*"]:this.options.cors.origins:[this.options.cors.origins!=="*"?this.options.cors.origins:"*"],allowMethods:this.options.cors?.methods||["GET","POST","PUT","PATCH","DELETE","OPTIONS"],allowCredentials:!this.options.cors?.credentials?!1:!0,allowHeaders:!this.options.cors?.headers||this.options.cors.headers.includes("*")?["*"]:this.options.cors.headers})}useValidator(_){this.#A=_}async preLaunch(){if(this.#_)return this.#_;let _=!this.#T.includes(ET)?void 0:Reflect.getOwnMetadata(ET,this.classConstructor),T=!this.#T.includes(ET)?[this.classConstructor]:_?.modules||[],A=!_?void 0:await this.containerResolution({containerClass:this.classConstructor,options:this.options,extendInjector:this.#E}),C=await Promise.all(T.map((w)=>this.moduleResolution({moduleClass:w,options:this.options,extendInjector:!A?this.#E:A.injector})));if([...new Set(C.map((w)=>w.prefix))].length!==C.length)throw Error("Module prefix should be unique.");let R=new Map;for(let w of C){let L=w.webSocketRouterGroup.execute();for(let[Y,F]of L.entries())R.set(Y,F)}let c=Object.freeze({containerMetadata:_,modulesConverted:T,resolutedContainer:A,resolutedModules:C,webSocketsMap:R});return this.#_=c,c}async listen(){let{allowLogsMethods:_,allowOrigins:T,allowMethods:A,allowHeaders:C,allowCredentials:E,staticOption:R}=this.#R,{resolutedContainer:c,resolutedModules:w,webSocketsMap:L}=await this.preLaunch(),Y=Bun.serve({port:this.options.port,fetch:async(F,J)=>{let S=performance.now(),Z=new URL(F.url),Q=R0.parse(Z.searchParams.toString(),this.options.queryParser),X=F.headers.get("origin")||"*",D=F.method.toUpperCase(),q=new Headers,N=new B_().setOptions({isStatic:!0}).set(RT,J).set(xT,F).set(cT,F.headers).set(CT,q).set(x_,Q);try{let U=C0(F),V;if(U){for(let M of w){let i=M.webSocketHttpRouterGroup.find(Z.pathname,F.method);if(i){V=Object.freeze({route:i,resolution:M});break}}if(!V)return this.finalizeResponse(new Response(JSON.stringify({httpCode:404,message:"Route not found",data:void 0}),{status:404,statusText:"Not found.",headers:q}));let h=await this.webSocketFetcher({request:F,server:J},{query:Q,responseHeaders:q,route:V.route,moduleResolution:V.resolution});return h instanceof Response?h:void 0}if([...!E?[]:[{key:"Access-Control-Allow-Credentials",value:"true"}],{key:"Access-Control-Allow-Origin",value:T.includes("*")?"*":!T.includes(X)?T[0]:X},{key:"Access-Control-Allow-Methods",value:A.join(", ")},{key:"Access-Control-Allow-Headers",value:C.join(", ")}].forEach(({key:h,value:M})=>q.set(h,M)),!A.includes(D))return this.finalizeResponse(new Response(void 0,{status:405,statusText:"Method Not Allowed.",headers:q}));if(F.method.toUpperCase()==="OPTIONS")return this.finalizeResponse(T.includes("*")||T.includes(X)?new Response(void 0,{status:204,statusText:"No Content.",headers:q}):new Response(void 0,{status:417,statusText:"Expectation Failed.",headers:q}));if(R){let{path:h,headers:M}=R,i=`${h}/${Z.pathname}`,o=this.#C.get(i);if(!o){let s=Bun.file(i);if(await s.exists()){if(M)for(let[TT,AT]of Object.entries(M))q.set(TT,AT);return q.set("Content-Type",s.type),this.finalizeResponse(new Response(await s.arrayBuffer(),{status:200,statusText:"SUCCESS",headers:q}))}}else{let s=new Date>o.expiredAt;if(s)this.#C.delete(i);let e=!s?o.file:Bun.file(i);if(await e.exists()){if(this.#C.set(i,Object.freeze({expiredAt:lC(new Date,this.#c,HT.seconds),file:e})),M)for(let[AT,IT]of Object.entries(M))q.set(AT,IT);return q.set("Content-Type",e.type),this.finalizeResponse(new Response(await e.arrayBuffer(),{status:200,statusText:"SUCCESS",headers:q}))}}}if(c){let{context:h}=await this.httpFetcher({context:N,resolutedMap:{injector:c.injector,startMiddlewareGroup:c.startMiddlewareGroup,guardGroup:c.guardGroup},options:{isContainer:!0}});N=h}for(let h of w){let M=h.controllerRouterGroup.find(Z.pathname,D);if(M){V=Object.freeze({route:M,resolution:h});break}}if(!V)N.setOptions({isStatic:!1}).set(H_,404).set(t_,"Not found.").set(L_,JSON.stringify({httpCode:404,message:"Route not found",data:void 0}));else{let{context:h}=await this.httpFetcher({context:N,route:V.route,resolutedMap:V.resolution});N=h}if(c){let{context:h}=await this.httpFetcher({context:N,resolutedMap:{injector:c.injector,endMiddlewareGroup:c.endMiddlewareGroup},options:{isContainer:!0}});N=h}let K=N.get(CT,{isStatic:!0})||new Headers,a=N.get(L_,{isStatic:!1})||void 0,f=N.get(H_,{isStatic:!1}),P=N.get(H_,{isStatic:!1});return this.serializeResponse({status:typeof f!=="number"?void 0:f,statusText:typeof P!=="string"?void 0:P,headers:K,data:a})}catch(U){return this.options.debug&&console.error(U),this.finalizeResponse(vC(U,q))}finally{if(_){let U=performance.now(),V=KT(Z.pathname,{color:"blue"}),K=`${Bun.color("yellow","ansi")}${process.pid}`,a=KT(F.method,{color:"yellow",backgroundColor:"blue"}),f=KT(`${F.headers.get("x-forwarded-for")||F.headers.get("x-real-ip")||J.requestIP(F)?.address||"<Unknown>"}`,{color:"yellow"}),P=KT(`${Math.round((U-S+Number.EPSILON)*100)/100}ms`,{color:"yellow",backgroundColor:"blue"});_.includes(F.method.toUpperCase())&&console.info(`PID: ${K} - Method: ${a} - IP: ${f} - ${V} - Time: ${P}`)}}},websocket:{open:(F)=>{let J=`${F.data.pathname}:::open`,S=L.get(J);if(!S)return;let Z=S.arguments||{},Q=[];for(let[X,D]of Object.entries(Z))switch(D.type){case fT:Q[D.index]=F;break;case QT:Q[D.index]=Y;break}S.descriptor.value(...Q)},close:(F,J,S)=>{let Z=`${F.data.pathname}:::close`,Q=L.get(Z);if(!Q)return;let X=Q.arguments||{},D=[];for(let[q,N]of Object.entries(X))switch(N.type){case fT:D[N.index]=F;break;case QT:D[N.index]=Y;break;case R_:D[N.index]=J;break;case c_:D[N.index]=S;break}Q.descriptor.value(...D)},message:(F,J)=>{let S=`${F.data.pathname}:::message`,Z=L.get(S);if(!Z)return;let Q=Z.arguments||{},X=[];for(let[D,q]of Object.entries(Q))switch(q.type){case fT:X[q.index]=F;break;case MT:X[q.index]=J;break;case QT:X[q.index]=Y;break}Z.descriptor.value(...X)},drain:(F)=>{let J=`${F.data.pathname}:::drain`,S=L.get(J);if(!S)return;let Z=S.arguments||{},Q=[];for(let[X,D]of Object.entries(Z))switch(D.type){case fT:Q[D.index]=F;break;case QT:Q[D.index]=Y;break}S.descriptor.value(...Q)},ping:(F,J)=>{let S=`${F.data.pathname}:::ping`,Z=L.get(S);if(!Z)return;let Q=Z.arguments||{},X=[];for(let[D,q]of Object.entries(Q))switch(q.type){case fT:X[q.index]=F;break;case QT:X[q.index]=Y;break;case MT:X[q.index]=J;break}Z.descriptor.value(...X)},pong:(F,J)=>{let S=`${F.data.pathname}:::pong`,Z=L.get(S);if(!Z)return;let Q=Z.arguments||{},X=[];for(let[D,q]of Object.entries(Q))switch(q.type){case fT:X[q.index]=F;break;case QT:X[q.index]=Y;break;case MT:X[q.index]=J;break}Z.descriptor.value(...X)}}})}async containerResolution({containerClass:_,options:T,extendInjector:A}){if(!Reflect.getOwnMetadataKeys(_).includes(ET))throw Error(`${_.name} is not a container.`);let C=new __(A),E=Reflect.getOwnMetadata(ET,_),{loaders:R,middlewares:c,guards:w,dependencies:L,config:Y}=E||{},{config:F}=Object.freeze({config:{...typeof T.config!=="function"?T.config:await T.config(),...typeof Y!=="function"?typeof Y!=="object"?void 0:("key"in Y)&&("value"in Y)&&typeof Y.key==="symbol"?typeof Y.value!=="function"?Y.value:await Y.value():Y:await Y()}});if(C.set(Y&&"key"in Y&&"value"in Y&&typeof Y.key==="symbol"?Y.key:K_,F),R){let Q=[];for(let[D,q]of Object.entries(R))Q.push(async()=>{try{let N=await q({config:F});return console.info(`${KT(" INFO ",{color:"white",backgroundColor:"blue",bold:!0})} Loader [${D}] initialized successfully.`),N}catch(N){throw console.error(`${KT(" WARN ",{color:"yellow",backgroundColor:"red",bold:!0})} Loader [${D}] initialization failed.`),T.debug&&console.error(N),N}});let X=await Promise.all(Q.map((D)=>D()));for(let[D,q]of X)C.set(D,q)}!L||L.map((Q)=>C.get(Q));let J=[],S=[];!c||c.forEach((Q)=>{let X=C.get(Q);if(X.start&&typeof X.start==="function"){let D=Reflect.getOwnMetadata(k,Q,"start")||{};J.push(Object.freeze({class:Q,funcName:"start",func:X.start.bind(X),argumentsMetadata:D}))}if(X.end&&typeof X.end==="function"){let D=Reflect.getOwnMetadata(k,Q,"end")||{};S.push(Object.freeze({class:Q,funcName:"end",func:X.end.bind(X),argumentsMetadata:D}))}});let Z=!w?[]:w.map((Q)=>{let X=C.get(Q),D=Reflect.getOwnMetadata(k,Q,"enforce")||{};return Object.freeze({class:Q,funcName:"enforce",func:X.enforce.bind(X),argumentsMetadata:D})});return Object.freeze({injector:C,startMiddlewareGroup:J,endMiddlewareGroup:S,guardGroup:Z})}async moduleResolution({moduleClass:_,options:T,extendInjector:A}){if(!Reflect.getOwnMetadataKeys(_).includes(qT))throw Error(`${_.name} is not a module.`);let C=new __(A),E=Reflect.getOwnMetadata(qT,_),{loaders:R,middlewares:c,guards:w,interceptors:L,controllers:Y,dependencies:F,webSockets:J,prefix:S,config:Z}=E||{},Q=`${T.prefix||""}/${S||""}`,{config:X}=Object.freeze({config:{...typeof T.config!=="function"?T.config:await T.config(),...typeof Z!=="function"?typeof Z!=="object"?void 0:("key"in Z)&&("value"in Z)&&typeof Z.key==="symbol"?typeof Z.value!=="function"?Z.value:await Z.value():Z:await Z()}});if(C.set(Z&&"key"in Z&&"value"in Z&&typeof Z.key==="symbol"?Z.key:K_,X),R){let P=[];for(let[M,i]of Object.entries(R))P.push(async()=>{try{let o=await i({config:X});return console.info(`${KT(" INFO ",{color:"white",backgroundColor:"blue",bold:!0})} Loader [${M}] initialized successfully.`),o}catch(o){throw console.error(`${KT(" WARN ",{color:"yellow",backgroundColor:"red",bold:!0})} Loader [${M}] initialization failed.`),T.debug&&console.error(o),o}});let h=await Promise.all(P.map((M)=>M()));for(let M=0;M<h.length;M++){let[i,o]=h[M];C.set(i,o)}}!F||F.map((P)=>C.get(P));let D=[],q=[];!c||c.forEach((P)=>{let h=C.get(P);if(h.start&&typeof h.start==="function"){let M=Reflect.getOwnMetadata(k,P,"start")||{};D.push(Object.freeze({class:P,funcName:"start",func:h.start.bind(h),argumentsMetadata:M}))}if(h.end&&typeof h.end==="function"){let M=Reflect.getOwnMetadata(k,P,"end")||{};q.push(Object.freeze({class:P,funcName:"end",func:h.end.bind(h),argumentsMetadata:M}))}});let N=!w?[]:w.map((P)=>{let h=C.get(P),M=Reflect.getOwnMetadata(k,P,"enforce")||{};return Object.freeze({class:P,funcName:"enforce",func:h.enforce.bind(h),argumentsMetadata:M})}),U=[],V=[];!L||L.forEach((P)=>{let h=C.get(P);if(h.open&&typeof h.open==="function"){let M=Reflect.getOwnMetadata(k,P,"open")||{};U.push(Object.freeze({class:P,funcName:"open",func:h.open.bind(h),argumentsMetadata:M}))}if(h.close&&typeof h.close==="function"){let M=Reflect.getOwnMetadata(k,P,"close")||{};V.push(Object.freeze({class:P,funcName:"close",func:h.close.bind(h),argumentsMetadata:M}))}});let K=new D_;!Y||Y.forEach((P)=>this.initControllerInstance({controllerConstructor:P,httpRouterGroup:K,injector:C,prefix:Q}));let a=new D_,f=new C_;return J&&J.forEach((P)=>this.initWebSocketInstance({webSocketConstructor:P,httpRouterGroup:a,webSocketRouterGroup:f,injector:C,prefix:Q})),Object.freeze({prefix:S||"",injector:C,startMiddlewareGroup:D,endMiddlewareGroup:q,guardGroup:N,openInterceptorGroup:U,closeInterceptorGroup:V,controllerRouterGroup:K,webSocketHttpRouterGroup:a,webSocketRouterGroup:f})}async argumentsResolution(_,T,A,C){if(!this.#A)return _;try{let E=await this.#A.validate(_,T,A,C);if(!(E instanceof E0))return E;throw new uT({httpCode:400,message:`Validation at the [${C.toString()}] method fails at positional argument [${A}].`,data:E.error})}catch(E){if(E instanceof uT)throw E;throw new w_({httpCode:500,message:`Validation at the [${C.toString()}] method error at positional argument [${A}].`,data:!(E instanceof Error)?E:[{message:E.message,code:E.name,cause:E.cause}]})}}initControllerInstance({controllerConstructor:_,httpRouterGroup:T,injector:A,prefix:C}){if(!Reflect.getOwnMetadataKeys(_).includes(ST))throw Error(`${_.name} is not a controller.`);let E=A.get(_);if(!E)throw Error("Can not initialize controller.");let R=Reflect.getOwnMetadata(ST,_)||{prefix:"/",httpMetadata:[]},c=new V_(`/${C||""}/${R.prefix}`);return R.httpMetadata.forEach((w)=>{if(typeof w.descriptor.value!=="function")return;let L=c.route(w.path),Y=w.descriptor.value.bind(E),F=Object.freeze({class:_,funcName:w.methodName,func:Y,argumentsMetadata:w.argumentsMetadata});switch(w.httpMethod){case"GET":return L.get(F);case"POST":return L.post(F);case"PUT":return L.put(F);case"PATCH":return L.patch(F);case"DELETE":return L.delete(F);case"OPTIONS":return L.options(F)}}),T.add(c)}initWebSocketInstance({injector:_,httpRouterGroup:T,prefix:A,webSocketRouterGroup:C,webSocketConstructor:E}){if(!Reflect.getOwnMetadataKeys(E).includes(YT))throw Error(`${E.name} is not a websocket route.`);let R=_.get(E);if(!R)throw Error("Can not initialize webSocket.");let c=Reflect.getOwnMetadata(YT,E)||{prefix:"/",events:[],http:[]},w=`/${A||""}/${c.prefix}`,L=new V_(w);for(let[F,J]of Object.entries(c.http)){if(typeof J.descriptor?.value!=="function")continue;let S=L.route(J.path),Z=J.descriptor.value.bind(R),Q=Object.freeze({class:E,funcName:J.methodName,func:Z,argumentsMetadata:J.argumentsMetadata});switch(J.httpMethod){case"GET":S.get(Q);break;case"POST":S.post(Q);break}}T.add(L);let Y=new G_(w);for(let[F,J]of Object.entries(c.events)){let S=new d_({eventName:F,metadata:J});Y.addRoutes(S)}return Y.bind(R),C.addRouters(Y),Object.freeze({httpRouterGroup:T,webSocketRouterGroup:C})}serializeResponse({status:_,statusText:T,headers:A,data:C}){let E=A.get("Content-Type")||"text/plain";if(E.includes("application/json"))return this.finalizeResponse(new Response(C instanceof ReadableStream?C:JSON.stringify(C),{status:_,statusText:T,headers:A}));if(E.includes("text/plain")||E.includes("text/html"))return this.finalizeResponse(new Response(C instanceof ReadableStream?C:String(C),{status:_,statusText:T,headers:A}));if(E.includes("application/octet-stream")){if(C instanceof Uint8Array||C instanceof ArrayBuffer||C instanceof Blob||C instanceof ReadableStream)return this.finalizeResponse(new Response(C,{status:_,statusText:T,headers:A}));throw Error("Invalid data type for application/octet-stream")}if(E.includes("multipart/form-data")){if(C instanceof FormData)return this.finalizeResponse(new Response(C,{status:_,statusText:T,headers:A}));throw Error("multipart/form-data requires FormData object")}return this.finalizeResponse(new Response(String(C),{status:_,statusText:T,headers:A}))}finalizeResponse(_){return _.headers.set("X-Powered-By","Bool Typescript"),_}async httpFetcher({context:_,route:T,options:A,resolutedMap:C}){let E={isStatic:!0},R=(!_?new B_:new B_(_)).setOptions(E);if(T)R.set(iT,T.parameters).set(LT,T.model);let c=R.get(RT,E)||void 0,w=R.get(xT,E)||void 0,L=R.get(cT,E)||void 0,Y=R.get(CT,E)||void 0,F=R.get(iT,E)||void 0,J=R.get(LT,E)||void 0;if(C){let{startMiddlewareGroup:S,guardGroup:Z}=C;if(S)for(let Q=0;Q<S.length;Q++){let X=[],{func:D,funcName:q,argumentsMetadata:N}=S[Q];for(let[U,V]of Object.entries(N))switch(V.type){case ZT:X[V.index]=!V.key?R:R.get(V.key,E);break;case xT:X[V.index]=!V.validationSchema?w:await this.argumentsResolution(w,V.validationSchema,V.index,q);break;case XT:X[V.index]=!V.validationSchema?await w?.[V.parser||"json"]():await this.argumentsResolution(await w?.[V.parser||"json"](),V.validationSchema,V.index,q);break;case UT:X[V.index]=!V.validationSchema?L:await this.argumentsResolution(L?.toJSON(),V.validationSchema,V.index,q);break;case cT:X[V.index]=!V.validationSchema?L?.get(V.key)||void 0:await this.argumentsResolution(L?.get(V.key)||void 0,V.validationSchema,V.index,q);break;case JT:X[V.index]=!V.validationSchema?F?.[V.key]||void 0:await this.argumentsResolution(F?.[V.key]||void 0,V.validationSchema,V.index,q);break;case LT:X[V.index]=J;break;case CT:X[V.index]=Y;break;case RT:X[V.index]=c;break;default:X[V.index]=!V.validationSchema?!R.has(V.type,E)?void 0:R.get(V.type,E):await this.argumentsResolution(!(V.type in R)?void 0:R.get(V.type,E),V.validationSchema,V.index,q);break}await D(...X)}if(Z)for(let Q=0;Q<Z.length;Q++){let X=[],{func:D,funcName:q,argumentsMetadata:N}=Z[Q];for(let[V,K]of Object.entries(N))switch(K.type){case xT:X[K.index]=!K.validationSchema?w:await this.argumentsResolution(w,K.validationSchema,K.index,q);break;case XT:X[K.index]=!K.validationSchema?await w?.[K.parser||"json"]():await this.argumentsResolution(await w?.[K.parser||"json"](),K.validationSchema,K.index,q);break;case ZT:X[K.index]=!K.key?R:R.get(K.key);break;case UT:X[K.index]=!K.validationSchema?L:await this.argumentsResolution(L?.toJSON(),K.validationSchema,K.index,q);break;case CT:X[K.index]=Y;break;case cT:X[K.index]=!K.validationSchema?L?.get(K.key)||void 0:await this.argumentsResolution(L?.get(K.key)||void 0,K.validationSchema,K.index,q);break;case JT:X[K.index]=!K.validationSchema?F?.[K.key]||void 0:await this.argumentsResolution(F?.[K.key],K.validationSchema,K.index,q);break;case LT:X[K.index]=J;break;case RT:X[K.index]=c;break;default:X[K.index]=!K.validationSchema?!R.has(K.type)?void 0:R.get(K.type):await this.argumentsResolution(R.get(K.type),K.validationSchema,K.index,q);break}let U=await D(...X);if(typeof U!=="boolean"||!U)throw new uT({httpCode:401,message:"Unauthorization.",data:void 0})}}if(J&&!A?.isContainer){if(C&&"openInterceptorGroup"in C&&C.openInterceptorGroup){let{openInterceptorGroup:D}=C;for(let q=0;q<D.length;q++){let N=[],{func:U,funcName:V,argumentsMetadata:K}=D[q];for(let[a,f]of Object.entries(K))switch(f.type){case xT:N[f.index]=!f.validationSchema?w:await this.argumentsResolution(w,f.validationSchema,f.index,V);break;case XT:N[f.index]=!f.validationSchema?await w?.[f.parser||"json"]():await this.argumentsResolution(await w?.[f.parser||"json"](),f.validationSchema,f.index,V);break;case ZT:N[f.index]=!f.key?R:R.get(f.key);break;case UT:N[f.index]=!f.validationSchema?L:await this.argumentsResolution(L?.toJSON(),f.validationSchema,f.index,V);break;case cT:N[f.index]=!f.validationSchema?L?.get(f.key)||void 0:await this.argumentsResolution(L?.get(f.key)||void 0,f.validationSchema,f.index,V);break;case CT:N[f.index]=Y;break;case JT:N[f.index]=!f.validationSchema?F?.[f.key]||void 0:await this.argumentsResolution(F?.[f.key]||void 0,f.validationSchema,f.index,V);break;case LT:N[f.index]=J;break;case RT:N[f.index]=c;break;default:N[f.index]=!f.validationSchema?!R.has(f.type)?void 0:R.get(f.type):await this.argumentsResolution(R.get(f.type),f.validationSchema,f.index,V);break}await U(...N)}}let S=[],{func:Z,funcName:Q,argumentsMetadata:X}=J;for(let[D,q]of Object.entries(X))switch(q.type){case xT:S[q.index]=!q.validationSchema?w:await this.argumentsResolution(w,q.validationSchema,q.index,Q);break;case XT:S[q.index]=!q.validationSchema?await w?.[q.parser||"json"]():await this.argumentsResolution(await w?.[q.parser||"json"](),q.validationSchema,q.index,Q);break;case ZT:S[q.index]=!q.key?R:R.get(q.key);break;case UT:S[q.index]=!q.validationSchema?L:await this.argumentsResolution(L?.toJSON(),q.validationSchema,q.index,Q);break;case cT:S[q.index]=!q.validationSchema?L?.get(q.key)||void 0:await this.argumentsResolution(L?.get(q.key)||void 0,q.validationSchema,q.index,Q);break;case CT:S[q.index]=Y;break;case JT:S[q.index]=!q.validationSchema?F?.[q.key]||void 0:await this.argumentsResolution(F?.[q.key]||void 0,q.validationSchema,q.index,Q);break;case LT:S[q.index]=J;break;case RT:S[q.index]=c;break;default:S[q.index]=!q.validationSchema?!R.has(q.type)?void 0:R.get(q.type):await this.argumentsResolution(R.get(q.type),q.validationSchema,q.index,Q);break}if(R.set(L_,await Z(...S),{isStatic:!1}),C&&"closeInterceptorGroup"in C&&C.closeInterceptorGroup){let{closeInterceptorGroup:D}=C;for(let q=0;q<D.length;q++){let N=[],{func:U,funcName:V,argumentsMetadata:K}=D[q];for(let[a,f]of Object.entries(K))switch(f.type){case xT:N[f.index]=!f.validationSchema?w:await this.argumentsResolution(w,f.validationSchema,f.index,V);break;case XT:N[f.index]=!f.validationSchema?await w?.[f.parser||"json"]():await this.argumentsResolution(await w?.[f.parser||"json"](),f.validationSchema,f.index,V);break;case ZT:N[f.index]=!f.key?R:R.get(f.key);break;case UT:N[f.index]=!f.validationSchema?L:await this.argumentsResolution(L?.toJSON(),f.validationSchema,f.index,V);break;case CT:N[f.index]=R.get(f.type);break;case cT:N[f.index]=!f.validationSchema?L?.get(f.key)||void 0:await this.argumentsResolution(L?.get(f.key)||void 0,f.validationSchema,f.index,V);break;case JT:N[f.index]=!f.validationSchema?F?.[f.key]||void 0:await this.argumentsResolution(F?.[f.key]||void 0,f.validationSchema,f.index,V);break;case LT:N[f.index]=J;break;case RT:N[f.index]=c;break;default:N[f.index]=!f.validationSchema?!R.has(f.type)?void 0:R.get(f.type):await this.argumentsResolution(R.get(f.type),f.validationSchema,f.index,V);break}await U(...N)}}}if(C){let{endMiddlewareGroup:S}=C;if(S)for(let Z=0;Z<S.length;Z++){let Q=[],{func:X,funcName:D,argumentsMetadata:q}=S[Z];for(let[N,U]of Object.entries(q))switch(U.type){case xT:Q[U.index]=!U.validationSchema?w:await this.argumentsResolution(w,U.validationSchema,U.index,D);break;case XT:Q[U.index]=!U.validationSchema?await w?.[U.parser||"json"]():await this.argumentsResolution(await w?.[U.parser||"json"](),U.validationSchema,U.index,D);break;case ZT:Q[U.index]=!U.key?R:R.get(U.key);break;case UT:Q[U.index]=!U.validationSchema?L:await this.argumentsResolution(L?.toJSON(),U.validationSchema,U.index,D);break;case CT:Q[U.index]=R.get(U.type);break;case cT:Q[U.index]=!U.validationSchema?L?.get(U.key)||void 0:await this.argumentsResolution(L?.get(U.key)||void 0,U.validationSchema,U.index,D);break;case JT:Q[U.index]=!U.validationSchema?F?.[U.key]||void 0:await this.argumentsResolution(F?.[U.key]||void 0,U.validationSchema,U.index,D);break;case LT:Q[U.index]=J;break;case RT:Q[U.index]=c;break;default:Q[U.index]=!U.validationSchema?!R.has(U.type)?void 0:R.get(U.type):await this.argumentsResolution(!(U.type in R)?void 0:R.get(U.type),U.validationSchema,U.index,D);break}await X(...Q)}}return Object.freeze({context:R})}async webSocketFetcher(_,T){let{request:A,server:C}=_,{query:E,responseHeaders:R,route:{model:c}}=T,w=await c.func(...[C,A,E]);if(typeof w!=="boolean")return this.finalizeResponse(new Response(JSON.stringify({httpCode:500,message:"Can not detect webSocket upgrade result.",data:void 0}),{status:500,statusText:"Internal server error.",headers:R}));if(!w)return this.finalizeResponse(new Response(JSON.stringify({httpCode:500,message:"Can not upgrade.",data:void 0}),{status:500,statusText:"Internal server error.",headers:R}));return w}}var SL=N_(n_(),1);var m1=async(_,T)=>{try{let A=new s_(_,T);return await A.preLaunch(),A}catch(A){throw T.debug&&console.error(A),A}};export{vC as jsonErrorInfer,xR as httpServerErrors,cR as httpClientErrors,_R as WebSocketServer,C_ as WebSocketRouterGroup,G_ as WebSocketRouter,d_ as WebSocketRoute,ER as WebSocketMessage,RR as WebSocketEvent,TR as WebSocketConnection,AR as WebSocketCloseReason,CR as WebSocketCloseCode,a0 as WebSocket,nC as ValidationFailed,u0 as RouteModel,O0 as ResponseHeaders,N0 as RequestHeaders,n0 as RequestHeader,K0 as RequestBody,m0 as Request,h0 as Query,y0 as Put,l0 as Post,j0 as Patch,I0 as Params,$0 as Param,s0 as Options,t0 as Module,r0 as Middleware,kC as Keys,p0 as Interceptor,__ as Injector,o0 as Injectable,i0 as Inject,w_ as HttpServerError,g0 as HttpServer,D_ as HttpRouterGroup,V_ as HttpRouter,GT as HttpRoute,uT as HttpClientError,k0 as Guard,v0 as Get,d0 as Delete,b0 as Controller,M0 as Context,P0 as Container,m1 as BoolFactory,s_ as Application};

//# debugId=6E41F817BD9EF81964756E2164756E21
